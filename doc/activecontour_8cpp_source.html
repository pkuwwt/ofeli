<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Ofeli: H:/Ofeli-Qt project/sources/core/activecontour.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="ofeli.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ofeli
   &#160;<span id="projectnumber">1.0.6</span>
   </div>
   <div id="projectbrief">an Open, Fast and Efficient Level Set Implementation</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">H:/Ofeli-Qt project/sources/core/activecontour.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 ﻿<span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">**</span>
<a name="l00003"></a>00003 <span class="comment">** Copyright (C) 2010-2011 Fabien Bessy.</span>
<a name="l00004"></a>00004 <span class="comment">** All rights reserved.</span>
<a name="l00005"></a>00005 <span class="comment">** Contact: fabien.bessy@gmail.com</span>
<a name="l00006"></a>00006 <span class="comment">**</span>
<a name="l00007"></a>00007 <span class="comment">** This file is part of Ofeli.</span>
<a name="l00008"></a>00008 <span class="comment">**</span>
<a name="l00009"></a>00009 <span class="comment">** You may use this file under the terms of the CeCILL license version 2 as follows:</span>
<a name="l00010"></a>00010 <span class="comment">**</span>
<a name="l00011"></a>00011 <span class="comment">** &quot;Redistribution and use in source and binary forms, with or without</span>
<a name="l00012"></a>00012 <span class="comment">** modification, are permitted provided that the following conditions are</span>
<a name="l00013"></a>00013 <span class="comment">** met:</span>
<a name="l00014"></a>00014 <span class="comment">**   * Redistributions of source code must retain the above copyright</span>
<a name="l00015"></a>00015 <span class="comment">**     notice, this list of conditions and the following disclaimer.</span>
<a name="l00016"></a>00016 <span class="comment">**   * Redistributions in binary form must reproduce the above copyright</span>
<a name="l00017"></a>00017 <span class="comment">**     notice, this list of conditions and the following disclaimer in</span>
<a name="l00018"></a>00018 <span class="comment">**     the documentation and/or other materials provided with the</span>
<a name="l00019"></a>00019 <span class="comment">**     distribution.</span>
<a name="l00020"></a>00020 <span class="comment">**   * Neither the name of Fabien Bessy nor the names of its contributors</span>
<a name="l00021"></a>00021 <span class="comment">**     may be used to endorse or promote products derived from this</span>
<a name="l00022"></a>00022 <span class="comment">**     software without specific prior written permission.</span>
<a name="l00023"></a>00023 <span class="comment">**</span>
<a name="l00024"></a>00024 <span class="comment">** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00025"></a>00025 <span class="comment">** &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00026"></a>00026 <span class="comment">** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00027"></a>00027 <span class="comment">** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00028"></a>00028 <span class="comment">** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00029"></a>00029 <span class="comment">** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00030"></a>00030 <span class="comment">** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00031"></a>00031 <span class="comment">** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00032"></a>00032 <span class="comment">** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00033"></a>00033 <span class="comment">** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00034"></a>00034 <span class="comment">** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.&quot;</span>
<a name="l00035"></a>00035 <span class="comment">**</span>
<a name="l00036"></a>00036 <span class="comment">**                    For all legal intents and purposes.</span>
<a name="l00037"></a>00037 <span class="comment">**</span>
<a name="l00038"></a>00038 <span class="comment">****************************************************************************/</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;activecontour.hpp&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;cmath&gt;</span> <span class="comment">// for the function &quot;exp&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;cstdlib&gt;</span> <span class="comment">// for the function &quot;abs&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;cstring&gt;</span> <span class="comment">// for the function &quot;memcpy&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;algorithm&gt;</span> <span class="comment">// for the function &quot;std::max&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;iostream&gt;</span> <span class="comment">// for the object &quot;std::cerr&quot;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="keyword">namespace </span>ofeli
<a name="l00048"></a>00048 {
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="classofeli_1_1_active_contour.html#a7e3e74c191281574e63948737b0be84a">00050</a> <a class="code" href="classofeli_1_1_active_contour.html#a7e3e74c191281574e63948737b0be84a" title="Constructor to initialize the active contour from geometrical parameters of an unique shape...">ActiveContour::ActiveContour</a>(<span class="keywordtype">int</span> img_width1, <span class="keywordtype">int</span> img_height1, <span class="keywordtype">bool</span> hasEllipse1, <span class="keywordtype">double</span> init_width1, <span class="keywordtype">double</span> init_height1, <span class="keywordtype">double</span> center_x1, <span class="keywordtype">double</span> center_y1, <span class="keywordtype">bool</span> hasSmoothingCycle1, <span class="keywordtype">int</span> kernel_length1, <span class="keywordtype">double</span> sigma1, <span class="keywordtype">bool</span> hasCleaning1, <span class="keywordtype">int</span> Na1, <span class="keywordtype">int</span> Ns1) : img_width(img_width1), img_height(img_height1), hasSmoothingCycle(hasSmoothingCycle1), kernel_length(kernel_length1), sigma(sigma1), hasCleaning(hasCleaning1), Na_max(Na1), Ns_max(Ns1), img_size(img_width1*img_height1), kernel_radius((kernel_length1-1)/2), phi(new char[img_width1*img_height1]), gaussian_kernel(make_gaussian_kernel(kernel_length1, sigma1)), max_iterations(calculate_max_iterations(img_width1, img_height1))
<a name="l00051"></a>00051 {
<a name="l00052"></a>00052     <span class="comment">// active contour initialization with phi, Lout and Lin</span>
<a name="l00053"></a>00053 
<a name="l00054"></a>00054     <span class="keywordtype">int</span> x, y; <span class="comment">// position of the current pixel</span>
<a name="l00055"></a>00055 
<a name="l00056"></a>00056     <span class="comment">// do an ellipse</span>
<a name="l00057"></a>00057     <span class="keywordflow">if</span>( hasEllipse1 )
<a name="l00058"></a>00058     {
<a name="l00059"></a>00059         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classofeli_1_1_active_contour.html#a9182e11132f64d7607fbd19a78f58387" title="Image size, i.e. number of pixels. Obviously, it egals to img_width × img_height.">img_size</a>; i++ )
<a name="l00060"></a>00060         {
<a name="l00061"></a>00061             <span class="comment">// i = x+y*img_width so</span>
<a name="l00062"></a>00062             y = i/<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00063"></a>00063             x = i-y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065             <span class="comment">// ellipse inequation</span>
<a name="l00066"></a>00066             <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#acd09c7c48a9033dad5e7927b52ae1c2c" title="Gives the square of a value.">square</a>( <span class="keywordtype">double</span>(y)-(1.0+2.0*center_y1)*<span class="keywordtype">double</span>(<a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a>)/2.0 ) / <a class="code" href="classofeli_1_1_active_contour.html#acd09c7c48a9033dad5e7927b52ae1c2c" title="Gives the square of a value.">square</a>( init_height1*<span class="keywordtype">double</span>(<a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a>)/2.0 ) + <a class="code" href="classofeli_1_1_active_contour.html#acd09c7c48a9033dad5e7927b52ae1c2c" title="Gives the square of a value.">square</a>( <span class="keywordtype">double</span>(x)-(1.0+2.0*center_x1)*<span class="keywordtype">double</span>(img_width)/2.0 ) / <a class="code" href="classofeli_1_1_active_contour.html#acd09c7c48a9033dad5e7927b52ae1c2c" title="Gives the square of a value.">square</a>( init_width1*<span class="keywordtype">double</span>(img_width)/2.0 ) &gt; 1.0 )
<a name="l00067"></a>00067             {
<a name="l00068"></a>00068                 <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] = 1; <span class="comment">// outside</span>
<a name="l00069"></a>00069                 <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a958b02f763e5a6b912bcd3dea479048c" title="Inserts a new element at the beginning of the list.">push_front</a>(i);
<a name="l00070"></a>00070             }
<a name="l00071"></a>00071             <span class="keywordflow">else</span>
<a name="l00072"></a>00072             {
<a name="l00073"></a>00073                 <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] = -1; <span class="comment">// inside</span>
<a name="l00074"></a>00074                 <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a958b02f763e5a6b912bcd3dea479048c" title="Inserts a new element at the beginning of the list.">push_front</a>(i);
<a name="l00075"></a>00075             }
<a name="l00076"></a>00076         }
<a name="l00077"></a>00077     }
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     <span class="comment">// do a rectangle</span>
<a name="l00080"></a>00080     <span class="keywordflow">else</span>
<a name="l00081"></a>00081     {
<a name="l00082"></a>00082         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classofeli_1_1_active_contour.html#a9182e11132f64d7607fbd19a78f58387" title="Image size, i.e. number of pixels. Obviously, it egals to img_width × img_height.">img_size</a>; i++ )
<a name="l00083"></a>00083         {
<a name="l00084"></a>00084             <span class="comment">// i = x+y*img_width so</span>
<a name="l00085"></a>00085             y = i/<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00086"></a>00086             x = i-y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00087"></a>00087 
<a name="l00088"></a>00088             <span class="keywordflow">if</span>( <span class="keywordtype">double</span>(y) &gt; ((1.0-init_height1)*<span class="keywordtype">double</span>(<a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a>)/2.0 + center_y1*<span class="keywordtype">double</span>(<a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a>)) &amp;&amp; <span class="keywordtype">double</span>(y) &lt; ((<span class="keywordtype">double</span>(<a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a>)-(1.0-init_height1)*<span class="keywordtype">double</span>(<a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a>)/2.0) + center_y1*<span class="keywordtype">double</span>(<a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a>)) &amp;&amp; <span class="keywordtype">double</span>(x) &gt; ((1.0-init_width1)*<span class="keywordtype">double</span>(img_width)/2.0 + center_x1*<span class="keywordtype">double</span>(img_width)) &amp;&amp; <span class="keywordtype">double</span>(x) &lt; ((<span class="keywordtype">double</span>(img_width)-(1.0-init_width1)*<span class="keywordtype">double</span>(img_width)/2.0) + center_x1*<span class="keywordtype">double</span>(img_width)) )
<a name="l00089"></a>00089             {
<a name="l00090"></a>00090                 <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] = -1; <span class="comment">// inside</span>
<a name="l00091"></a>00091                 <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a958b02f763e5a6b912bcd3dea479048c" title="Inserts a new element at the beginning of the list.">push_front</a>(i);
<a name="l00092"></a>00092             }
<a name="l00093"></a>00093             <span class="keywordflow">else</span>
<a name="l00094"></a>00094             {
<a name="l00095"></a>00095                 <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] = 1; <span class="comment">// outside</span>
<a name="l00096"></a>00096                 <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a958b02f763e5a6b912bcd3dea479048c" title="Inserts a new element at the beginning of the list.">push_front</a>(i);
<a name="l00097"></a>00097             }
<a name="l00098"></a>00098         }
<a name="l00099"></a>00099     }
<a name="l00100"></a>00100 
<a name="l00101"></a>00101     <a class="code" href="classofeli_1_1_active_contour.html#a33de623e3a4aefe9f31b6ec28428f807" title="Eliminates redundant points in Lout.">eliminate_redundant_in_Lout</a>(); <span class="comment">// clean Lout boundary</span>
<a name="l00102"></a>00102     <a class="code" href="classofeli_1_1_active_contour.html#a2fbcb81cc03239dae86e7a235dd64e00" title="Eliminates redundant points in Lin.">eliminate_redundant_in_Lin</a>(); <span class="comment">// clean Lin boundary</span>
<a name="l00103"></a>00103 
<a name="l00104"></a>00104     <span class="comment">// variables initialization</span>
<a name="l00105"></a>00105     <a class="code" href="classofeli_1_1_active_contour.html#a352ab5b5b6b389e9a55afa1db318dfda" title="Initialization of variables in the both constructors.">initialize</a>();
<a name="l00106"></a>00106 }
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="classofeli_1_1_active_contour.html#aee0c5cf1daeb71d99439f97b8a5da3e2">00108</a> <a class="code" href="classofeli_1_1_active_contour.html#a7e3e74c191281574e63948737b0be84a" title="Constructor to initialize the active contour from geometrical parameters of an unique shape...">ActiveContour::ActiveContour</a>(<span class="keywordtype">int</span> img_width1, <span class="keywordtype">int</span> img_height1, <span class="keyword">const</span> <span class="keywordtype">char</span>* phi_init1, <span class="keywordtype">bool</span> hasSmoothingCycle1, <span class="keywordtype">int</span> kernel_length1, <span class="keywordtype">double</span> sigma1, <span class="keywordtype">bool</span> hasCleaning1, <span class="keywordtype">int</span> Na1, <span class="keywordtype">int</span> Ns1) : img_width(img_width1), img_height(img_height1), hasSmoothingCycle(hasSmoothingCycle1), kernel_length(kernel_length1), sigma(sigma1), hasCleaning(hasCleaning1), Na_max(Na1), Ns_max(Ns1), img_size(img_width1*img_height1), kernel_radius((kernel_length1-1)/2), phi(new char[img_width1*img_height1]), gaussian_kernel(make_gaussian_kernel(kernel_length1, sigma1)), max_iterations(calculate_max_iterations(img_width1, img_height1))
<a name="l00109"></a>00109 {
<a name="l00110"></a>00110     <span class="keywordflow">if</span>( phi_init1 == NULL )
<a name="l00111"></a>00111     {
<a name="l00112"></a>00112         std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;The pointer phi_init1 must be a non-null pointer, it must be allocated.&quot;</span> &lt;&lt; std::endl;
<a name="l00113"></a>00113     }
<a name="l00114"></a>00114     <span class="keywordflow">else</span>
<a name="l00115"></a>00115     {
<a name="l00116"></a>00116         <span class="comment">// active contour initialization with phi, Lout and Lin</span>
<a name="l00117"></a>00117         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classofeli_1_1_active_contour.html#a9182e11132f64d7607fbd19a78f58387" title="Image size, i.e. number of pixels. Obviously, it egals to img_width × img_height.">img_size</a>; i++ )
<a name="l00118"></a>00118         {
<a name="l00119"></a>00119             <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] = phi_init1[i];
<a name="l00120"></a>00120 
<a name="l00121"></a>00121             <span class="keywordflow">if</span>( phi_init1[i] == 1 )
<a name="l00122"></a>00122             {
<a name="l00123"></a>00123                 <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a958b02f763e5a6b912bcd3dea479048c" title="Inserts a new element at the beginning of the list.">push_front</a>(i);
<a name="l00124"></a>00124             }
<a name="l00125"></a>00125             <span class="keywordflow">else</span> <span class="keywordflow">if</span>( phi_init1[i] == -1 )
<a name="l00126"></a>00126             {
<a name="l00127"></a>00127                 <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a958b02f763e5a6b912bcd3dea479048c" title="Inserts a new element at the beginning of the list.">push_front</a>(i);
<a name="l00128"></a>00128             }
<a name="l00129"></a>00129         }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131         <span class="comment">// variables initialization</span>
<a name="l00132"></a>00132         <a class="code" href="classofeli_1_1_active_contour.html#a352ab5b5b6b389e9a55afa1db318dfda" title="Initialization of variables in the both constructors.">initialize</a>();
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="classofeli_1_1_active_contour.html#a352ab5b5b6b389e9a55afa1db318dfda">00136</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a352ab5b5b6b389e9a55afa1db318dfda" title="Initialization of variables in the both constructors.">ActiveContour::initialize</a>()
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138     <span class="comment">// initialization of 4 variables for the oscillation stopping condition</span>
<a name="l00139"></a>00139     <a class="code" href="classofeli_1_1_active_contour.html#a653c2bcd37ed61e9eacda89a013590d4" title="Length of Lin + length of Lout of the previous iteration.">previous_lists_length</a> = 999999;
<a name="l00140"></a>00140     <a class="code" href="classofeli_1_1_active_contour.html#aefe0738d8a43f3981d591a0cc78ed717" title="Length of Lin + length of Lout.">lists_length</a> = 0;
<a name="l00141"></a>00141     <a class="code" href="classofeli_1_1_active_contour.html#a2ed4a3e2aa6904c287412a1510318b96" title="To count the number of times the relative gap of the lists length are less of a constant, fixed at 0.5%.">counter</a> = 0;
<a name="l00142"></a>00142 
<a name="l00143"></a>00143     <a class="code" href="classofeli_1_1_active_contour.html#a8464ac191aec1487b186a3f66b87b000" title="General initialization used for video tracking.">do_general_initialization_for_each_frame</a>();
<a name="l00144"></a>00144 
<a name="l00145"></a>00145     <span class="keywordflow">return</span>;
<a name="l00146"></a>00146 }
<a name="l00147"></a>00147 
<a name="l00148"></a><a class="code" href="classofeli_1_1_active_contour.html#a8464ac191aec1487b186a3f66b87b000">00148</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a8464ac191aec1487b186a3f66b87b000" title="General initialization used for video tracking.">ActiveContour::do_general_initialization_for_each_frame</a>()
<a name="l00149"></a>00149 {
<a name="l00150"></a>00150     <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a> = 0; <span class="comment">// in the cycle 1</span>
<a name="l00151"></a>00151     <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> = 0; <span class="comment">// in the cycle 2</span>
<a name="l00152"></a>00152     <a class="code" href="classofeli_1_1_active_contour.html#a56384ad665bfd16485040e33b584eb64" title="Number of iterations in the last cycle 2.">Ns_last</a> = 0; <span class="comment">// in the last cycle 2</span>
<a name="l00153"></a>00153     <a class="code" href="classofeli_1_1_active_contour.html#a2ff3ef2151ddf1e7f9f260ad9bf3d6f2" title="Boolean egals to false to go away the cycle 1 and never to go back into.">hasCycle1</a> = <span class="keyword">true</span>;
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     <span class="comment">// 3 variables of 3 stopping conditions</span>
<a name="l00156"></a>00156     <a class="code" href="classofeli_1_1_active_contour.html#acaaac3e08e34cf03c1320c220b188b78" title="Boolean egals to true if hasOutwardEvolution egals to true or hasInwardEvolution egals to true...">hasListsChanges</a> = <span class="keyword">true</span>;
<a name="l00157"></a>00157     <a class="code" href="classofeli_1_1_active_contour.html#a23e817e4d98cdc2ba8da0b44c5d0ffb8" title="Boolean egals to true if oscillations are detected. In this case, hasAlgoStopping egals to true...">hasOscillation</a> = <span class="keyword">false</span>;
<a name="l00158"></a>00158     <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a> = 0;
<a name="l00159"></a>00159 
<a name="l00160"></a>00160     <a class="code" href="classofeli_1_1_active_contour.html#ac239b94976782c0769bda5d2b1e3d1b8" title="Boolean egals to true to stop the algorithm.">hasAlgoStopping</a> = <span class="keyword">false</span>; <span class="comment">// to start the algorithm</span>
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     <span class="keywordflow">return</span>;
<a name="l00163"></a>00163 }
<a name="l00164"></a>00164 
<a name="l00165"></a><a class="code" href="classofeli_1_1_active_contour.html#ac1d127818cc396568532a662951f6f8e">00165</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#ac1d127818cc396568532a662951f6f8e" title="Initialization for each new frame buffer, used for video tracking.">ActiveContour::initialize_for_each_frame</a>()
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167     <a class="code" href="classofeli_1_1_active_contour.html#a8464ac191aec1487b186a3f66b87b000" title="General initialization used for video tracking.">do_general_initialization_for_each_frame</a>();
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <span class="keywordflow">return</span>;
<a name="l00170"></a>00170 }
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="classofeli_1_1_active_contour.html#a6c5e80a286279409a40f279f5e9f848c">00172</a> <span class="keyword">const</span> <span class="keywordtype">int</span>* <span class="keyword">const</span> <a class="code" href="classofeli_1_1_active_contour.html#a6c5e80a286279409a40f279f5e9f848c" title="Does a normalised gaussian kernel without to divide by π ">ActiveContour::make_gaussian_kernel</a>(<span class="keywordtype">int</span> kernel_length1, <span class="keywordtype">double</span> sigma1)
<a name="l00173"></a>00173 {
<a name="l00174"></a>00174     <span class="comment">// kernel_length impair and strictly positive</span>
<a name="l00175"></a>00175     <span class="keywordflow">if</span>( kernel_length1 % 2 == 0 )
<a name="l00176"></a>00176     {
<a name="l00177"></a>00177         kernel_length1--;
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="keywordflow">if</span>( kernel_length1 &lt; 1 )
<a name="l00181"></a>00181     {
<a name="l00182"></a>00182         kernel_length1 = 1;
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="comment">// protection against /0</span>
<a name="l00186"></a>00186     <span class="keywordflow">if</span>( sigma1 &lt; 0.000000001 )
<a name="l00187"></a>00187     {
<a name="l00188"></a>00188         sigma1 = 0.000000001;
<a name="l00189"></a>00189     }
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     <span class="keywordtype">int</span> x, y; <span class="comment">// position of the current pixel</span>
<a name="l00192"></a>00192 
<a name="l00193"></a>00193     <span class="keyword">const</span> <span class="keywordtype">int</span> kernel_size1 = kernel_length1*kernel_length1;
<a name="l00194"></a>00194     <span class="keyword">const</span> <span class="keywordtype">int</span> kernel_radius1 = (kernel_length1-1)/2;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <span class="keywordtype">int</span>* <span class="keyword">const</span> gaussian_kernel1 = <span class="keyword">new</span> <span class="keywordtype">int</span>[kernel_size1];
<a name="l00197"></a>00197 
<a name="l00198"></a>00198     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; kernel_size1; i++ )
<a name="l00199"></a>00199     {
<a name="l00200"></a>00200         <span class="comment">// i = x+y*kernel_length so</span>
<a name="l00201"></a>00201         y = i/kernel_length1;
<a name="l00202"></a>00202         x = i-y*kernel_length1;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204         gaussian_kernel1[i] = int( 0.5+100000.0*exp( -( <a class="code" href="classofeli_1_1_active_contour.html#acd09c7c48a9033dad5e7927b52ae1c2c" title="Gives the square of a value.">square</a>(<span class="keywordtype">double</span>(y)-<span class="keywordtype">double</span>(kernel_radius1)) + <a class="code" href="classofeli_1_1_active_contour.html#acd09c7c48a9033dad5e7927b52ae1c2c" title="Gives the square of a value.">square</a>(<span class="keywordtype">double</span>(x)-<span class="keywordtype">double</span>(kernel_radius1)) ) / (2*<a class="code" href="classofeli_1_1_active_contour.html#acd09c7c48a9033dad5e7927b52ae1c2c" title="Gives the square of a value.">square</a>(sigma1)) ) );
<a name="l00205"></a>00205     }
<a name="l00206"></a>00206 
<a name="l00207"></a>00207     <span class="keywordflow">return</span> gaussian_kernel1;
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="classofeli_1_1_active_contour.html#af1af6dc1037dda5738dc9964a9476b84">00210</a> <a class="code" href="classofeli_1_1_active_contour.html#af1af6dc1037dda5738dc9964a9476b84" title="Destructor to delete phi and gaussian_kernel.">ActiveContour::~ActiveContour</a>()
<a name="l00211"></a>00211 {
<a name="l00212"></a>00212     <span class="keyword">delete</span>[] <a class="code" href="classofeli_1_1_active_contour.html#a0f8558877cf436d932838173ba5b8061" title="Pointer on the gaussian kernel buffer used to calculate Fint.">gaussian_kernel</a>;
<a name="l00213"></a>00213     <span class="keyword">delete</span>[] <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>;
<a name="l00214"></a>00214 }
<a name="l00215"></a>00215 
<a name="l00216"></a><a class="code" href="classofeli_1_1_active_contour.html#a2ab521c583572158549d416ccc755f3a">00216</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a2ab521c583572158549d416ccc755f3a" title="Function called by evolve_one_iteration() for external or data dependant evolution with Fd speed...">ActiveContour::do_one_iteration_in_cycle1</a>()
<a name="l00217"></a>00217 {
<a name="l00218"></a>00218     <span class="keywordtype">int</span> i, x, y; <span class="comment">// offset and position of the current point of the active contour</span>
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <a class="code" href="classofeli_1_1_active_contour.html#a9dcea2f4d6803007fe98e38152adf000" title="Boolean egals to true if one point of Lout at least is switched in during the scan through the Lout l...">hasOutwardEvolution</a> = <span class="keyword">false</span>;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222     <a class="code" href="classofeli_1_1_active_contour.html#ad81d408bec3feae072028c7db664797d" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to c...">do_specific_beginning_step</a>(); <span class="comment">// to calculate Cout and Cin means in O(1) in Chan-Vese model.</span>
<a name="l00223"></a>00223 
<a name="l00224"></a>00224     <span class="comment">// scan through Lout</span>
<a name="l00225"></a>00225     <span class="keywordflow">for</span>( <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a9644211d17b247bb008f2b129fddb434" title="Sets the current link to the head link.">begin</a>(); !<a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#ac87c58b2d4c2cc4c16cd0981bc0e17c5" title="Checks if he current link points to the last node.">end</a>();  )
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227         i = <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a55df006801917d08e146ab6302f203cb" title="Gets the element at the current position.">get_current</a>();
<a name="l00228"></a>00228 
<a name="l00229"></a>00229         <span class="comment">// i = x+y*img_width so</span>
<a name="l00230"></a>00230         y = i/<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00231"></a>00231         x = i-y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#ab53eb16e33ba58b3bb9402a186d71d31" title="Computes the external speed Fd for a current point (x,y) of Lout or Lin.">compute_external_speed_Fd</a>(i,x,y) &gt; 0 )
<a name="l00234"></a>00234         {
<a name="l00235"></a>00235             <a class="code" href="classofeli_1_1_active_contour.html#ae34d798fec18971f9b0f6cbed59c090f" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to u...">do_specific_in_step</a>(i,x,y); <span class="comment">// updates of the variables to calculate the means Cout and Cin</span>
<a name="l00236"></a>00236 
<a name="l00237"></a>00237             <a class="code" href="classofeli_1_1_active_contour.html#ae503203f7eed34136805ea11175dcc62" title="Outward local movement of the curve for a current point (x,y) of Lout that is switched in Lin...">switch_in</a>(i,x,y); <span class="comment">// outward local movement</span>
<a name="l00238"></a>00238 
<a name="l00239"></a>00239             <span class="keywordflow">if</span>( !<a class="code" href="classofeli_1_1_active_contour.html#a9dcea2f4d6803007fe98e38152adf000" title="Boolean egals to true if one point of Lout at least is switched in during the scan through the Lout l...">hasOutwardEvolution</a> )
<a name="l00240"></a>00240             {
<a name="l00241"></a>00241                 <a class="code" href="classofeli_1_1_active_contour.html#a9dcea2f4d6803007fe98e38152adf000" title="Boolean egals to true if one point of Lout at least is switched in during the scan through the Lout l...">hasOutwardEvolution</a> = <span class="keyword">true</span>;
<a name="l00242"></a>00242             }
<a name="l00243"></a>00243         }
<a name="l00244"></a>00244         <span class="keywordflow">else</span>
<a name="l00245"></a>00245         {
<a name="l00246"></a>00246             <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#aa9e7033c3adc49c441decebf72b7b9b8" title="Sets the current link to the next link.">next</a>();
<a name="l00247"></a>00247         }
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a9dcea2f4d6803007fe98e38152adf000" title="Boolean egals to true if one point of Lout at least is switched in during the scan through the Lout l...">hasOutwardEvolution</a> &amp;&amp; <a class="code" href="classofeli_1_1_active_contour.html#a8d7a7c8b12556672bb052a84ae7f9671" title="Boolean egals to true to eliminate the redundant points in Lin and Lout lists.">hasCleaning</a> )
<a name="l00251"></a>00251     {
<a name="l00252"></a>00252         <a class="code" href="classofeli_1_1_active_contour.html#a2fbcb81cc03239dae86e7a235dd64e00" title="Eliminates redundant points in Lin.">eliminate_redundant_in_Lin</a>(); <span class="comment">// Lin boundary cleaning</span>
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     <a class="code" href="classofeli_1_1_active_contour.html#af437460aa2cdf312166a3fe4d54beeb4" title="Boolean egals to true if one point of Lin at least is switched out during the scan through the Lin li...">hasInwardEvolution</a> = <span class="keyword">false</span>;
<a name="l00256"></a>00256 
<a name="l00257"></a>00257     <span class="comment">// scan through Lin</span>
<a name="l00258"></a>00258     <span class="keywordflow">for</span>( <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a9644211d17b247bb008f2b129fddb434" title="Sets the current link to the head link.">begin</a>(); !<a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#ac87c58b2d4c2cc4c16cd0981bc0e17c5" title="Checks if he current link points to the last node.">end</a>();  )
<a name="l00259"></a>00259     {
<a name="l00260"></a>00260         i = <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a55df006801917d08e146ab6302f203cb" title="Gets the element at the current position.">get_current</a>();
<a name="l00261"></a>00261 
<a name="l00262"></a>00262         <span class="comment">// i = x+y*img_width so</span>
<a name="l00263"></a>00263         y = i/<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00264"></a>00264         x = i-y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00265"></a>00265 
<a name="l00266"></a>00266         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#ab53eb16e33ba58b3bb9402a186d71d31" title="Computes the external speed Fd for a current point (x,y) of Lout or Lin.">compute_external_speed_Fd</a>(i,x,y) &lt; 0 )
<a name="l00267"></a>00267         {
<a name="l00268"></a>00268             <a class="code" href="classofeli_1_1_active_contour.html#ae938fd6dcb59480b9262c64094613984" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to u...">do_specific_out_step</a>(i,x,y); <span class="comment">// updates of the variables to calculate the means Cout and Cin</span>
<a name="l00269"></a>00269 
<a name="l00270"></a>00270             <a class="code" href="classofeli_1_1_active_contour.html#a6c32060c165e04d1eb9cc0895c7c65ba" title="Inward local movement of the curve for a current point (x,y) of Lin that is switched in Lout...">switch_out</a>(i,x,y); <span class="comment">// inward local movement</span>
<a name="l00271"></a>00271 
<a name="l00272"></a>00272             <span class="keywordflow">if</span>( !<a class="code" href="classofeli_1_1_active_contour.html#af437460aa2cdf312166a3fe4d54beeb4" title="Boolean egals to true if one point of Lin at least is switched out during the scan through the Lin li...">hasInwardEvolution</a> )
<a name="l00273"></a>00273             {
<a name="l00274"></a>00274                 <a class="code" href="classofeli_1_1_active_contour.html#af437460aa2cdf312166a3fe4d54beeb4" title="Boolean egals to true if one point of Lin at least is switched out during the scan through the Lin li...">hasInwardEvolution</a> = <span class="keyword">true</span>;
<a name="l00275"></a>00275             }
<a name="l00276"></a>00276         }
<a name="l00277"></a>00277         <span class="keywordflow">else</span>
<a name="l00278"></a>00278         {
<a name="l00279"></a>00279             <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#aa9e7033c3adc49c441decebf72b7b9b8" title="Sets the current link to the next link.">next</a>();
<a name="l00280"></a>00280         }
<a name="l00281"></a>00281     }
<a name="l00282"></a>00282 
<a name="l00283"></a>00283     <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#af437460aa2cdf312166a3fe4d54beeb4" title="Boolean egals to true if one point of Lin at least is switched out during the scan through the Lin li...">hasInwardEvolution</a> &amp;&amp; <a class="code" href="classofeli_1_1_active_contour.html#a8d7a7c8b12556672bb052a84ae7f9671" title="Boolean egals to true to eliminate the redundant points in Lin and Lout lists.">hasCleaning</a> )
<a name="l00284"></a>00284     {
<a name="l00285"></a>00285         <a class="code" href="classofeli_1_1_active_contour.html#a33de623e3a4aefe9f31b6ec28428f807" title="Eliminates redundant points in Lout.">eliminate_redundant_in_Lout</a>(); <span class="comment">// Lout boundary cleaning</span>
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288     <a class="code" href="classofeli_1_1_active_contour.html#a7c7275006d98705cd7f04f8a7fe7e697" title="First stopping condition called at the end of each iteration of the cycle 1. Update of hasListsChange...">calculate_stopping_conditions1</a>();
<a name="l00289"></a>00289 
<a name="l00290"></a>00290     <span class="keywordflow">return</span>;
<a name="l00291"></a>00291 }
<a name="l00292"></a>00292 
<a name="l00293"></a><a class="code" href="classofeli_1_1_active_contour.html#a7cf8243140d8ef8f72a638e9a1442dc2">00293</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a7cf8243140d8ef8f72a638e9a1442dc2" title="Function called by evolve_one_iteration() for a curve smoothing or internal evolution with Fint speed...">ActiveContour::do_one_iteration_in_cycle2</a>()
<a name="l00294"></a>00294 {
<a name="l00295"></a>00295     <span class="keywordtype">int</span> i, x, y; <span class="comment">// offset and position of the current point of the active contour</span>
<a name="l00296"></a>00296 
<a name="l00297"></a>00297     <span class="comment">// scan through Lout</span>
<a name="l00298"></a>00298     <span class="keywordflow">for</span>( <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a9644211d17b247bb008f2b129fddb434" title="Sets the current link to the head link.">begin</a>(); !<a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#ac87c58b2d4c2cc4c16cd0981bc0e17c5" title="Checks if he current link points to the last node.">end</a>();  )
<a name="l00299"></a>00299     {
<a name="l00300"></a>00300         i = <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a55df006801917d08e146ab6302f203cb" title="Gets the element at the current position.">get_current</a>();
<a name="l00301"></a>00301 
<a name="l00302"></a>00302         <span class="comment">// i = x+y*img_width so</span>
<a name="l00303"></a>00303         y = i/<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00304"></a>00304         x = i-y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00305"></a>00305 
<a name="l00306"></a>00306         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> == <a class="code" href="classofeli_1_1_active_contour.html#a908322f93a50ce7808960236478649fe" title="Number of maximum iterations the active contour evolves in the cycle 2 with Fint speed.">Ns_max</a>-1 )
<a name="l00307"></a>00307         {
<a name="l00308"></a>00308             <a class="code" href="classofeli_1_1_active_contour.html#aefe0738d8a43f3981d591a0cc78ed717" title="Length of Lin + length of Lout.">lists_length</a>++;
<a name="l00309"></a>00309         }
<a name="l00310"></a>00310 
<a name="l00311"></a>00311         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a73d4494adc5b2c3b595dc013a8af17bd" title="Computes the internal speed Fint for a current point (x,y) of Lout or Lin.">compute_internal_speed_Fint</a>(i,x,y) &lt; 0 )
<a name="l00312"></a>00312         {
<a name="l00313"></a>00313             <a class="code" href="classofeli_1_1_active_contour.html#a29ffb870edb974dc2ab0a1851e2483bf" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to u...">do_specific_in_step2</a>(i,x,y); <span class="comment">// updates of the variables to calculate the means Cout and Cin</span>
<a name="l00314"></a>00314 
<a name="l00315"></a>00315             <a class="code" href="classofeli_1_1_active_contour.html#ae503203f7eed34136805ea11175dcc62" title="Outward local movement of the curve for a current point (x,y) of Lout that is switched in Lin...">switch_in</a>(i,x,y); <span class="comment">// outward local movement</span>
<a name="l00316"></a>00316         }
<a name="l00317"></a>00317         <span class="keywordflow">else</span>
<a name="l00318"></a>00318         {
<a name="l00319"></a>00319             <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#aa9e7033c3adc49c441decebf72b7b9b8" title="Sets the current link to the next link.">next</a>();
<a name="l00320"></a>00320         }
<a name="l00321"></a>00321     }
<a name="l00322"></a>00322 
<a name="l00323"></a>00323     <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a8d7a7c8b12556672bb052a84ae7f9671" title="Boolean egals to true to eliminate the redundant points in Lin and Lout lists.">hasCleaning</a> )
<a name="l00324"></a>00324     {
<a name="l00325"></a>00325         <a class="code" href="classofeli_1_1_active_contour.html#a2fbcb81cc03239dae86e7a235dd64e00" title="Eliminates redundant points in Lin.">eliminate_redundant_in_Lin</a>(); <span class="comment">// Lin boundary cleaning</span>
<a name="l00326"></a>00326     }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328     <span class="comment">// scan through Lin</span>
<a name="l00329"></a>00329     <span class="keywordflow">for</span>( <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a9644211d17b247bb008f2b129fddb434" title="Sets the current link to the head link.">begin</a>(); !<a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#ac87c58b2d4c2cc4c16cd0981bc0e17c5" title="Checks if he current link points to the last node.">end</a>();  )
<a name="l00330"></a>00330     {
<a name="l00331"></a>00331         i = <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a55df006801917d08e146ab6302f203cb" title="Gets the element at the current position.">get_current</a>();
<a name="l00332"></a>00332 
<a name="l00333"></a>00333         <span class="comment">// i = x+y*img_width so</span>
<a name="l00334"></a>00334         y = i/<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00335"></a>00335         x = i-y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> == <a class="code" href="classofeli_1_1_active_contour.html#a908322f93a50ce7808960236478649fe" title="Number of maximum iterations the active contour evolves in the cycle 2 with Fint speed.">Ns_max</a>-1 )
<a name="l00338"></a>00338         {
<a name="l00339"></a>00339             <a class="code" href="classofeli_1_1_active_contour.html#aefe0738d8a43f3981d591a0cc78ed717" title="Length of Lin + length of Lout.">lists_length</a>++;
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a73d4494adc5b2c3b595dc013a8af17bd" title="Computes the internal speed Fint for a current point (x,y) of Lout or Lin.">compute_internal_speed_Fint</a>(i,x,y) &gt; 0 )
<a name="l00343"></a>00343         {
<a name="l00344"></a>00344             <a class="code" href="classofeli_1_1_active_contour.html#a265bec94de92dfa81d786099bcbc30ab" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to u...">do_specific_out_step2</a>(i,x,y); <span class="comment">// updates of the variables to calculate the means Cout and Cin</span>
<a name="l00345"></a>00345 
<a name="l00346"></a>00346             <a class="code" href="classofeli_1_1_active_contour.html#a6c32060c165e04d1eb9cc0895c7c65ba" title="Inward local movement of the curve for a current point (x,y) of Lin that is switched in Lout...">switch_out</a>(i,x,y); <span class="comment">// inward local movement</span>
<a name="l00347"></a>00347         }
<a name="l00348"></a>00348         <span class="keywordflow">else</span>
<a name="l00349"></a>00349         {
<a name="l00350"></a>00350             <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#aa9e7033c3adc49c441decebf72b7b9b8" title="Sets the current link to the next link.">next</a>();
<a name="l00351"></a>00351         }
<a name="l00352"></a>00352     }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354     <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a8d7a7c8b12556672bb052a84ae7f9671" title="Boolean egals to true to eliminate the redundant points in Lin and Lout lists.">hasCleaning</a> )
<a name="l00355"></a>00355     {
<a name="l00356"></a>00356         <a class="code" href="classofeli_1_1_active_contour.html#a33de623e3a4aefe9f31b6ec28428f807" title="Eliminates redundant points in Lout.">eliminate_redundant_in_Lout</a>(); <span class="comment">// Lout boundary cleaning</span>
<a name="l00357"></a>00357     }
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a>++;
<a name="l00360"></a>00360 
<a name="l00361"></a>00361     <span class="keywordflow">return</span>;
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00364"></a><a class="code" href="classofeli_1_1_active_contour.html#a7ec7567e8af8bc1bce4b310f7d01be72">00364</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a7ec7567e8af8bc1bce4b310f7d01be72" title="Evolves the active contour of one iteration or one step. This function calls the functions do_one_ite...">ActiveContour::evolve_one_iteration</a>()
<a name="l00365"></a>00365 {
<a name="l00366"></a>00366     <span class="keywordflow">if</span>( !<a class="code" href="classofeli_1_1_active_contour.html#ac239b94976782c0769bda5d2b1e3d1b8" title="Boolean egals to true to stop the algorithm.">hasAlgoStopping</a> )
<a name="l00367"></a>00367     {
<a name="l00368"></a>00368         <span class="comment">// Na_max iterations in the cycle 1</span>
<a name="l00369"></a>00369         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a2ff3ef2151ddf1e7f9f260ad9bf3d6f2" title="Boolean egals to false to go away the cycle 1 and never to go back into.">hasCycle1</a> )
<a name="l00370"></a>00370         {
<a name="l00371"></a>00371             <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a> &lt; <a class="code" href="classofeli_1_1_active_contour.html#a811a28ec9c39400d244783a8a2fe7e2d" title="Number of maximum iterations the active contour evolves in the cycle 1 with Fd speed.">Na_max</a>-1 )
<a name="l00372"></a>00372             {
<a name="l00373"></a>00373                 <a class="code" href="classofeli_1_1_active_contour.html#a2ab521c583572158549d416ccc755f3a" title="Function called by evolve_one_iteration() for external or data dependant evolution with Fd speed...">do_one_iteration_in_cycle1</a>(); <span class="comment">// data dependant evolution</span>
<a name="l00374"></a>00374                 <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a>++;
<a name="l00375"></a>00375                 <span class="keywordflow">return</span>;
<a name="l00376"></a>00376             }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378             <span class="comment">// last iteration of the cycle 1</span>
<a name="l00379"></a>00379             <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a> == <a class="code" href="classofeli_1_1_active_contour.html#a811a28ec9c39400d244783a8a2fe7e2d" title="Number of maximum iterations the active contour evolves in the cycle 1 with Fd speed.">Na_max</a>-1 )
<a name="l00380"></a>00380             {
<a name="l00381"></a>00381                 <a class="code" href="classofeli_1_1_active_contour.html#a2ab521c583572158549d416ccc755f3a" title="Function called by evolve_one_iteration() for external or data dependant evolution with Fd speed...">do_one_iteration_in_cycle1</a>(); <span class="comment">// data dependant evolution</span>
<a name="l00382"></a>00382 
<a name="l00383"></a>00383                 <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a2d78fdef72930323ab6bdd38b167afa1" title="Boolean egals to true to have the curve smoothing, evolutions in the cycle 2 with the internal speed ...">hasSmoothingCycle</a> )
<a name="l00384"></a>00384                 {
<a name="l00385"></a>00385                     <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a>++; <span class="comment">// in order to do the cycle2, now Na = Na_max</span>
<a name="l00386"></a>00386                 }
<a name="l00387"></a>00387                 <span class="keywordflow">else</span>
<a name="l00388"></a>00388                 {
<a name="l00389"></a>00389                     <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a> = 0; <span class="comment">// in order to restart the cycle1</span>
<a name="l00390"></a>00390                 }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392                 <span class="keywordflow">return</span>;
<a name="l00393"></a>00393             }
<a name="l00394"></a>00394         }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396         <span class="comment">// Ns_max iterations in the cycle 2</span>
<a name="l00397"></a>00397         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a2d78fdef72930323ab6bdd38b167afa1" title="Boolean egals to true to have the curve smoothing, evolutions in the cycle 2 with the internal speed ...">hasSmoothingCycle</a> )
<a name="l00398"></a>00398         {
<a name="l00399"></a>00399             <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> &lt; <a class="code" href="classofeli_1_1_active_contour.html#a908322f93a50ce7808960236478649fe" title="Number of maximum iterations the active contour evolves in the cycle 2 with Fint speed.">Ns_max</a>-1 )
<a name="l00400"></a>00400             {
<a name="l00401"></a>00401                 <a class="code" href="classofeli_1_1_active_contour.html#a7cf8243140d8ef8f72a638e9a1442dc2" title="Function called by evolve_one_iteration() for a curve smoothing or internal evolution with Fint speed...">do_one_iteration_in_cycle2</a>(); <span class="comment">// ac regularization</span>
<a name="l00402"></a>00402                 <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a>++;
<a name="l00403"></a>00403                 <span class="keywordflow">return</span>;
<a name="l00404"></a>00404             }
<a name="l00405"></a>00405 
<a name="l00406"></a>00406             <span class="comment">// last iteration of the cycle 2</span>
<a name="l00407"></a>00407             <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> == <a class="code" href="classofeli_1_1_active_contour.html#a908322f93a50ce7808960236478649fe" title="Number of maximum iterations the active contour evolves in the cycle 2 with Fint speed.">Ns_max</a>-1 )
<a name="l00408"></a>00408             {
<a name="l00409"></a>00409                 <a class="code" href="classofeli_1_1_active_contour.html#a7cf8243140d8ef8f72a638e9a1442dc2" title="Function called by evolve_one_iteration() for a curve smoothing or internal evolution with Fint speed...">do_one_iteration_in_cycle2</a>(); <span class="comment">// ac regularization</span>
<a name="l00410"></a>00410                 <a class="code" href="classofeli_1_1_active_contour.html#a218109b08dd520c95ee7613235bb0593" title="Second stopping condition called at the end of the cycle 2. Update of hasOscillation. Two tests on hasOscillation and iterations are done. If one test is positive, hasAlgoStopping egals to true and the active contour stops.">calculate_stopping_conditions2</a>();
<a name="l00411"></a>00411                 <span class="comment">// in order to restart the both cycles</span>
<a name="l00412"></a>00412                 <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a> = 0;
<a name="l00413"></a>00413                 <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> = 0;
<a name="l00414"></a>00414                 <span class="keywordflow">return</span>;
<a name="l00415"></a>00415             }
<a name="l00416"></a>00416         }
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418 
<a name="l00419"></a>00419     <span class="keywordflow">return</span>;
<a name="l00420"></a>00420 }
<a name="l00421"></a>00421 
<a name="l00422"></a><a class="code" href="classofeli_1_1_active_contour.html#a8eaa11cf2095e8429526170b238bae38">00422</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a8eaa11cf2095e8429526170b238bae38" title="Evolves the active contour n times or n iterations.">ActiveContour::evolve_n_iterations</a>(<span class="keywordtype">int</span> n)
<a name="l00423"></a>00423 {
<a name="l00424"></a>00424     <span class="keyword">const</span> <span class="keywordtype">int</span> N = <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a>+n;
<a name="l00425"></a>00425 
<a name="l00426"></a>00426     <span class="keywordflow">while</span>( !<a class="code" href="classofeli_1_1_active_contour.html#ac239b94976782c0769bda5d2b1e3d1b8" title="Boolean egals to true to stop the algorithm.">hasAlgoStopping</a> &amp;&amp; <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a> &lt; N )
<a name="l00427"></a>00427     {
<a name="l00428"></a>00428         <span class="keywordflow">for</span>(  ; <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a> &lt; <a class="code" href="classofeli_1_1_active_contour.html#a811a28ec9c39400d244783a8a2fe7e2d" title="Number of maximum iterations the active contour evolves in the cycle 1 with Fd speed.">Na_max</a> &amp;&amp; <a class="code" href="classofeli_1_1_active_contour.html#a2ff3ef2151ddf1e7f9f260ad9bf3d6f2" title="Boolean egals to false to go away the cycle 1 and never to go back into.">hasCycle1</a> &amp;&amp; <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a> &lt; N; <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a>++ )
<a name="l00429"></a>00429         {
<a name="l00430"></a>00430             <a class="code" href="classofeli_1_1_active_contour.html#a2ab521c583572158549d416ccc755f3a" title="Function called by evolve_one_iteration() for external or data dependant evolution with Fd speed...">do_one_iteration_in_cycle1</a>();
<a name="l00431"></a>00431         }
<a name="l00432"></a>00432         <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a> = 0;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a2d78fdef72930323ab6bdd38b167afa1" title="Boolean egals to true to have the curve smoothing, evolutions in the cycle 2 with the internal speed ...">hasSmoothingCycle</a> )
<a name="l00435"></a>00435         {
<a name="l00436"></a>00436             <span class="keywordflow">for</span>(  ; <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> &lt; <a class="code" href="classofeli_1_1_active_contour.html#a908322f93a50ce7808960236478649fe" title="Number of maximum iterations the active contour evolves in the cycle 2 with Fint speed.">Ns_max</a> &amp;&amp; <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a> &lt; N; <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a>++ )
<a name="l00437"></a>00437             {
<a name="l00438"></a>00438                 <a class="code" href="classofeli_1_1_active_contour.html#a7cf8243140d8ef8f72a638e9a1442dc2" title="Function called by evolve_one_iteration() for a curve smoothing or internal evolution with Fint speed...">do_one_iteration_in_cycle2</a>();
<a name="l00439"></a>00439             }
<a name="l00440"></a>00440             <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> = 0;
<a name="l00441"></a>00441             <a class="code" href="classofeli_1_1_active_contour.html#a218109b08dd520c95ee7613235bb0593" title="Second stopping condition called at the end of the cycle 2. Update of hasOscillation. Two tests on hasOscillation and iterations are done. If one test is positive, hasAlgoStopping egals to true and the active contour stops.">calculate_stopping_conditions2</a>();
<a name="l00442"></a>00442         }
<a name="l00443"></a>00443     }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445     <span class="keywordflow">return</span>;
<a name="l00446"></a>00446 }
<a name="l00447"></a>00447 
<a name="l00448"></a><a class="code" href="classofeli_1_1_active_contour.html#adb4b25587c73924176f5ed3477ec54f7">00448</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#adb4b25587c73924176f5ed3477ec54f7" title="Evolves directly the active contour at the final state, when hasAlgoStopping egals to true...">ActiveContour::evolve_to_final_state</a>()
<a name="l00449"></a>00449 {
<a name="l00450"></a>00450     <span class="keywordflow">while</span>( !<a class="code" href="classofeli_1_1_active_contour.html#ac239b94976782c0769bda5d2b1e3d1b8" title="Boolean egals to true to stop the algorithm.">hasAlgoStopping</a> )
<a name="l00451"></a>00451     {
<a name="l00452"></a>00452         <span class="keywordflow">for</span>(  ; <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a> &lt; <a class="code" href="classofeli_1_1_active_contour.html#a811a28ec9c39400d244783a8a2fe7e2d" title="Number of maximum iterations the active contour evolves in the cycle 1 with Fd speed.">Na_max</a> &amp;&amp; <a class="code" href="classofeli_1_1_active_contour.html#a2ff3ef2151ddf1e7f9f260ad9bf3d6f2" title="Boolean egals to false to go away the cycle 1 and never to go back into.">hasCycle1</a>; <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a>++ )
<a name="l00453"></a>00453         {
<a name="l00454"></a>00454             <a class="code" href="classofeli_1_1_active_contour.html#a2ab521c583572158549d416ccc755f3a" title="Function called by evolve_one_iteration() for external or data dependant evolution with Fd speed...">do_one_iteration_in_cycle1</a>();
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456         <a class="code" href="classofeli_1_1_active_contour.html#a59f111cd0910d2e6534b51bb1da3c254" title="Number of iterations the active contour evolves in the cycle 1 with Fd speed.">Na</a> = 0;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a2d78fdef72930323ab6bdd38b167afa1" title="Boolean egals to true to have the curve smoothing, evolutions in the cycle 2 with the internal speed ...">hasSmoothingCycle</a> )
<a name="l00459"></a>00459         {
<a name="l00460"></a>00460             <span class="keywordflow">for</span>(  ; <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> &lt; <a class="code" href="classofeli_1_1_active_contour.html#a908322f93a50ce7808960236478649fe" title="Number of maximum iterations the active contour evolves in the cycle 2 with Fint speed.">Ns_max</a>; <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a>++ )
<a name="l00461"></a>00461             {
<a name="l00462"></a>00462                 <a class="code" href="classofeli_1_1_active_contour.html#a7cf8243140d8ef8f72a638e9a1442dc2" title="Function called by evolve_one_iteration() for a curve smoothing or internal evolution with Fint speed...">do_one_iteration_in_cycle2</a>();
<a name="l00463"></a>00463             }
<a name="l00464"></a>00464             <a class="code" href="classofeli_1_1_active_contour.html#a38cc27ae9706801882322f02b5db2df8" title="Number of iterations the active contour evolves in the cycle 2 with Fint speed.">Ns</a> = 0;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466             <a class="code" href="classofeli_1_1_active_contour.html#a218109b08dd520c95ee7613235bb0593" title="Second stopping condition called at the end of the cycle 2. Update of hasOscillation. Two tests on hasOscillation and iterations are done. If one test is positive, hasAlgoStopping egals to true and the active contour stops.">calculate_stopping_conditions2</a>();
<a name="l00467"></a>00467         }
<a name="l00468"></a>00468     }
<a name="l00469"></a>00469 
<a name="l00470"></a>00470     <span class="keywordflow">return</span>;
<a name="l00471"></a>00471 }
<a name="l00472"></a>00472 
<a name="l00473"></a><a class="code" href="classofeli_1_1_active_contour.html#ae503203f7eed34136805ea11175dcc62">00473</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#ae503203f7eed34136805ea11175dcc62" title="Outward local movement of the curve for a current point (x,y) of Lout that is switched in Lin...">ActiveContour::switch_in</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l00474"></a>00474 {
<a name="l00475"></a>00475     <span class="comment">// Outward local movement</span>
<a name="l00476"></a>00476 
<a name="l00477"></a>00477     <span class="comment">// current point (x,y) of Lout is switched in Lin</span>
<a name="l00478"></a>00478     <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a073c198f6289cff1af7224e47f60b2ea" title="Removes a node of a list and inserts at the beginning of this list. Equivalent to erase() and push_fr...">switch_node</a>( <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a0d93d271a1a269629dbf04e8c342cbe6" title="Gets the link at the current position.">get_current_node</a>() );
<a name="l00479"></a>00479     <span class="comment">// &lt;==&gt; Lout.erase(); Lin.push_front(i); but without use of operator delete and operator new.</span>
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] = -1; <span class="comment">// value is changed from 1 to -1</span>
<a name="l00482"></a>00482 
<a name="l00483"></a>00483 
<a name="l00484"></a>00484     <span class="comment">//==============   4-connex version   =============</span>
<a name="l00485"></a>00485 
<a name="l00486"></a>00486     <span class="keywordflow">if</span>( y-1 &gt;= 0 )
<a name="l00487"></a>00487     {
<a name="l00488"></a>00488         <a class="code" href="classofeli_1_1_active_contour.html#a0f954c3b812913869ee24efb7f0953d4" title="Second step of procedure switch_in.">add_Rout_neighbor_to_Lout</a>( x+(y-1)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> );
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490     <span class="keywordflow">if</span>( x-1 &gt;= 0 )
<a name="l00491"></a>00491     {
<a name="l00492"></a>00492         <a class="code" href="classofeli_1_1_active_contour.html#a0f954c3b812913869ee24efb7f0953d4" title="Second step of procedure switch_in.">add_Rout_neighbor_to_Lout</a>( (x-1)+y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> );
<a name="l00493"></a>00493     }
<a name="l00494"></a>00494     <span class="keywordflow">if</span>( x+1 &lt; <a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> )
<a name="l00495"></a>00495     {
<a name="l00496"></a>00496         <a class="code" href="classofeli_1_1_active_contour.html#a0f954c3b812913869ee24efb7f0953d4" title="Second step of procedure switch_in.">add_Rout_neighbor_to_Lout</a>( (x+1)+y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> );
<a name="l00497"></a>00497     }
<a name="l00498"></a>00498     <span class="keywordflow">if</span>( y+1 &lt; <a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a> )
<a name="l00499"></a>00499     {
<a name="l00500"></a>00500         <a class="code" href="classofeli_1_1_active_contour.html#a0f954c3b812913869ee24efb7f0953d4" title="Second step of procedure switch_in.">add_Rout_neighbor_to_Lout</a>( x+(y+1)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> );
<a name="l00501"></a>00501     }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503     <span class="comment">//=================================================</span>
<a name="l00504"></a>00504 
<a name="l00505"></a>00505 
<a name="l00506"></a>00506     <span class="comment">//==============   8-connex version   =============</span>
<a name="l00507"></a>00507 
<a name="l00508"></a>00508     <span class="comment">// if not in the border of the image, no neighbor test</span>
<a name="l00509"></a>00509     <span class="comment">/*if( x &gt; 0 &amp;&amp; x &lt; img_width-1 &amp;&amp; y &gt; 0 &amp;&amp; y &lt; img_height-1 )</span>
<a name="l00510"></a>00510 <span class="comment">    {</span>
<a name="l00511"></a>00511 <span class="comment">        // scan through a 8-connex neighborhood</span>
<a name="l00512"></a>00512 <span class="comment">        for( int dy = -1; dy &lt;= 1; dy++ )</span>
<a name="l00513"></a>00513 <span class="comment">        {</span>
<a name="l00514"></a>00514 <span class="comment">            for( int dx = -1; dx &lt;= 1; dx++ )</span>
<a name="l00515"></a>00515 <span class="comment">            {</span>
<a name="l00516"></a>00516 <span class="comment">                if( !( dx == 0 &amp;&amp; dy == 0 ) )</span>
<a name="l00517"></a>00517 <span class="comment">                {</span>
<a name="l00518"></a>00518 <span class="comment">                    add_Rout_neighbor_to_Lout( (x+dx)+(y+dy)*img_width );</span>
<a name="l00519"></a>00519 <span class="comment">                }</span>
<a name="l00520"></a>00520 <span class="comment">            }</span>
<a name="l00521"></a>00521 <span class="comment">        }</span>
<a name="l00522"></a>00522 <span class="comment">    }</span>
<a name="l00523"></a>00523 <span class="comment"></span>
<a name="l00524"></a>00524 <span class="comment">    // if in the border, neighbors tests</span>
<a name="l00525"></a>00525 <span class="comment">    else</span>
<a name="l00526"></a>00526 <span class="comment">    {</span>
<a name="l00527"></a>00527 <span class="comment">        // scan through a 8-connex neighborhood</span>
<a name="l00528"></a>00528 <span class="comment">        for( int dy = -1; dy &lt;= 1; dy++ )</span>
<a name="l00529"></a>00529 <span class="comment">        {</span>
<a name="l00530"></a>00530 <span class="comment">            for( int dx = -1; dx &lt;= 1; dx++ )</span>
<a name="l00531"></a>00531 <span class="comment">            {</span>
<a name="l00532"></a>00532 <span class="comment">                if( !( dx == 0 &amp;&amp; dy == 0 ) )</span>
<a name="l00533"></a>00533 <span class="comment">                {</span>
<a name="l00534"></a>00534 <span class="comment">                    // existence tests</span>
<a name="l00535"></a>00535 <span class="comment">                    if( x+dx &gt;= 0 &amp;&amp; x+dx &lt; img_width &amp;&amp; y+dy &gt;= 0 &amp;&amp; y+dy &lt; img_height )</span>
<a name="l00536"></a>00536 <span class="comment">                    {</span>
<a name="l00537"></a>00537 <span class="comment">                        add_Rout_neighbor_to_Lout( (x+dx)+(y+dy)*img_width );</span>
<a name="l00538"></a>00538 <span class="comment">                    }</span>
<a name="l00539"></a>00539 <span class="comment">                }</span>
<a name="l00540"></a>00540 <span class="comment">            }</span>
<a name="l00541"></a>00541 <span class="comment">        }</span>
<a name="l00542"></a>00542 <span class="comment">    }*/</span>
<a name="l00543"></a>00543 
<a name="l00544"></a>00544     <span class="comment">//=================================================</span>
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     <span class="keywordflow">return</span>;
<a name="l00547"></a>00547 }
<a name="l00548"></a>00548 
<a name="l00549"></a><a class="code" href="classofeli_1_1_active_contour.html#a0f954c3b812913869ee24efb7f0953d4">00549</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a0f954c3b812913869ee24efb7f0953d4" title="Second step of procedure switch_in.">ActiveContour::add_Rout_neighbor_to_Lout</a>(<span class="keywordtype">int</span> i_neighbor)
<a name="l00550"></a>00550 {
<a name="l00551"></a>00551     <span class="comment">// if a neighbor ∈ Rout</span>
<a name="l00552"></a>00552     <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i_neighbor] == 3 )
<a name="l00553"></a>00553     {
<a name="l00554"></a>00554         <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i_neighbor] = 1;
<a name="l00555"></a>00555 
<a name="l00556"></a>00556         <span class="comment">// neighbor ∈ Rout --&gt; ∈ Lout</span>
<a name="l00557"></a>00557         <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a958b02f763e5a6b912bcd3dea479048c" title="Inserts a new element at the beginning of the list.">push_front</a>(i_neighbor);
<a name="l00558"></a>00558     }
<a name="l00559"></a>00559 
<a name="l00560"></a>00560     <span class="keywordflow">return</span>;
<a name="l00561"></a>00561 }
<a name="l00562"></a>00562 
<a name="l00563"></a><a class="code" href="classofeli_1_1_active_contour.html#a6c32060c165e04d1eb9cc0895c7c65ba">00563</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a6c32060c165e04d1eb9cc0895c7c65ba" title="Inward local movement of the curve for a current point (x,y) of Lin that is switched in Lout...">ActiveContour::switch_out</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l00564"></a>00564 {
<a name="l00565"></a>00565     <span class="comment">// Inward local movement</span>
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     <span class="comment">// current point (x,y) of Lin is switched in Lout</span>
<a name="l00568"></a>00568     <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a073c198f6289cff1af7224e47f60b2ea" title="Removes a node of a list and inserts at the beginning of this list. Equivalent to erase() and push_fr...">switch_node</a>( <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a0d93d271a1a269629dbf04e8c342cbe6" title="Gets the link at the current position.">get_current_node</a>() );
<a name="l00569"></a>00569     <span class="comment">// &lt;==&gt; Lin.erase(); Lout.push_front(i); but without use of operator delete and operator new.</span>
<a name="l00570"></a>00570 
<a name="l00571"></a>00571     <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] = 1; <span class="comment">// value is changed from -1 to 1</span>
<a name="l00572"></a>00572 
<a name="l00573"></a>00573 
<a name="l00574"></a>00574     <span class="comment">//==============   4-connex version   =============</span>
<a name="l00575"></a>00575 
<a name="l00576"></a>00576     <span class="keywordflow">if</span>( y-1 &gt;= 0 )
<a name="l00577"></a>00577     {
<a name="l00578"></a>00578         <a class="code" href="classofeli_1_1_active_contour.html#ac5a3f9a9b703c591e29351dd0d8a1c66" title="Second step of procedure switch_out.">add_Rin_neighbor_to_Lin</a>( x+(y-1)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> );
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580     <span class="keywordflow">if</span>( x-1 &gt;= 0 )
<a name="l00581"></a>00581     {
<a name="l00582"></a>00582         <a class="code" href="classofeli_1_1_active_contour.html#ac5a3f9a9b703c591e29351dd0d8a1c66" title="Second step of procedure switch_out.">add_Rin_neighbor_to_Lin</a>( (x-1)+y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> );
<a name="l00583"></a>00583     }
<a name="l00584"></a>00584     <span class="keywordflow">if</span>( x+1 &lt; <a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> )
<a name="l00585"></a>00585     {
<a name="l00586"></a>00586         <a class="code" href="classofeli_1_1_active_contour.html#ac5a3f9a9b703c591e29351dd0d8a1c66" title="Second step of procedure switch_out.">add_Rin_neighbor_to_Lin</a>( (x+1)+y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> );
<a name="l00587"></a>00587     }
<a name="l00588"></a>00588     <span class="keywordflow">if</span>( y+1 &lt; <a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a> )
<a name="l00589"></a>00589     {
<a name="l00590"></a>00590         <a class="code" href="classofeli_1_1_active_contour.html#ac5a3f9a9b703c591e29351dd0d8a1c66" title="Second step of procedure switch_out.">add_Rin_neighbor_to_Lin</a>( x+(y+1)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> );
<a name="l00591"></a>00591     }
<a name="l00592"></a>00592 
<a name="l00593"></a>00593     <span class="comment">//=================================================</span>
<a name="l00594"></a>00594 
<a name="l00595"></a>00595 
<a name="l00596"></a>00596     <span class="comment">//==============   8-connex version   =============</span>
<a name="l00597"></a>00597 
<a name="l00598"></a>00598     <span class="comment">// if not in the border of the image, no neighbor test</span>
<a name="l00599"></a>00599     <span class="comment">/*if( x &gt; 0 &amp;&amp; x &lt; img_width-1 &amp;&amp; y &gt; 0 &amp;&amp; y &lt; img_height-1 )</span>
<a name="l00600"></a>00600 <span class="comment">    {</span>
<a name="l00601"></a>00601 <span class="comment">        // scan through a 8-connex neighborhood</span>
<a name="l00602"></a>00602 <span class="comment">        for( int dy = -1; dy &lt;= 1; dy++ )</span>
<a name="l00603"></a>00603 <span class="comment">        {</span>
<a name="l00604"></a>00604 <span class="comment">            for( int dx = -1; dx &lt;= 1; dx++ )</span>
<a name="l00605"></a>00605 <span class="comment">            {</span>
<a name="l00606"></a>00606 <span class="comment">                if( !( dx == 0 &amp;&amp; dy == 0 ) )</span>
<a name="l00607"></a>00607 <span class="comment">                {</span>
<a name="l00608"></a>00608 <span class="comment">                    add_Rin_neighbor_to_Lin( (x+dx)+(y+dy)*img_width );</span>
<a name="l00609"></a>00609 <span class="comment">                }</span>
<a name="l00610"></a>00610 <span class="comment">            }</span>
<a name="l00611"></a>00611 <span class="comment">        }</span>
<a name="l00612"></a>00612 <span class="comment">    }</span>
<a name="l00613"></a>00613 <span class="comment"></span>
<a name="l00614"></a>00614 <span class="comment">    // if in the border, neighbors tests</span>
<a name="l00615"></a>00615 <span class="comment">    else</span>
<a name="l00616"></a>00616 <span class="comment">    {</span>
<a name="l00617"></a>00617 <span class="comment">        // scan through a 8-connex neighborhood</span>
<a name="l00618"></a>00618 <span class="comment">        for( int dy = -1; dy &lt;= 1; dy++ )</span>
<a name="l00619"></a>00619 <span class="comment">        {</span>
<a name="l00620"></a>00620 <span class="comment">            for( int dx = -1; dx &lt;= 1; dx++ )</span>
<a name="l00621"></a>00621 <span class="comment">            {</span>
<a name="l00622"></a>00622 <span class="comment">                if( !( dx == 0 &amp;&amp; dy == 0 ) )</span>
<a name="l00623"></a>00623 <span class="comment">                {</span>
<a name="l00624"></a>00624 <span class="comment">                    // existence tests</span>
<a name="l00625"></a>00625 <span class="comment">                    if( x+dx &gt;= 0 &amp;&amp; x+dx &lt; img_width &amp;&amp; y+dy &gt;= 0 &amp;&amp; y+dy &lt; img_height )</span>
<a name="l00626"></a>00626 <span class="comment">                    {</span>
<a name="l00627"></a>00627 <span class="comment">                        add_Rin_neighbor_to_Lin( (x+dx)+(y+dy)*img_width );</span>
<a name="l00628"></a>00628 <span class="comment">                    }</span>
<a name="l00629"></a>00629 <span class="comment">                }</span>
<a name="l00630"></a>00630 <span class="comment">            }</span>
<a name="l00631"></a>00631 <span class="comment">        }</span>
<a name="l00632"></a>00632 <span class="comment">    }*/</span>
<a name="l00633"></a>00633 
<a name="l00634"></a>00634     <span class="comment">//=================================================</span>
<a name="l00635"></a>00635 
<a name="l00636"></a>00636     <span class="keywordflow">return</span>;
<a name="l00637"></a>00637 }
<a name="l00638"></a>00638 
<a name="l00639"></a><a class="code" href="classofeli_1_1_active_contour.html#ac5a3f9a9b703c591e29351dd0d8a1c66">00639</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#ac5a3f9a9b703c591e29351dd0d8a1c66" title="Second step of procedure switch_out.">ActiveContour::add_Rin_neighbor_to_Lin</a>(<span class="keywordtype">int</span> i_neighbor)
<a name="l00640"></a>00640 {
<a name="l00641"></a>00641     <span class="comment">// if a neighbor ∈ Rin</span>
<a name="l00642"></a>00642     <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i_neighbor] == -3 )
<a name="l00643"></a>00643     {
<a name="l00644"></a>00644         <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i_neighbor] = -1;
<a name="l00645"></a>00645 
<a name="l00646"></a>00646         <span class="comment">// neighbor ∈ Rin --&gt; ∈ Lin</span>
<a name="l00647"></a>00647         <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a958b02f763e5a6b912bcd3dea479048c" title="Inserts a new element at the beginning of the list.">push_front</a>(i_neighbor);
<a name="l00648"></a>00648     }
<a name="l00649"></a>00649 
<a name="l00650"></a>00650     <span class="keywordflow">return</span>;
<a name="l00651"></a>00651 }
<a name="l00652"></a>00652 
<a name="l00653"></a><a class="code" href="classofeli_1_1_active_contour.html#a73d4494adc5b2c3b595dc013a8af17bd">00653</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classofeli_1_1_active_contour.html#a73d4494adc5b2c3b595dc013a8af17bd" title="Computes the internal speed Fint for a current point (x,y) of Lout or Lin.">ActiveContour::compute_internal_speed_Fint</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l00654"></a>00654 {
<a name="l00655"></a>00655     <span class="keywordtype">int</span> Fint = 0;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657     <span class="comment">// if not in the border of the image, no neighbor test</span>
<a name="l00658"></a>00658     <span class="keywordflow">if</span>( x &gt; <a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>-1 &amp;&amp; x &lt; img_width-kernel_radius &amp;&amp; y &gt; <a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>-1 &amp;&amp; y &lt; <a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a>-<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a> )
<a name="l00659"></a>00659     {
<a name="l00660"></a>00660         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> dy = -<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>; dy &lt;= <a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>; dy++ )
<a name="l00661"></a>00661         {
<a name="l00662"></a>00662             <span class="keywordflow">for</span>( <span class="keywordtype">int</span> dx = -<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>; dx &lt;= <a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>; dx++ )
<a name="l00663"></a>00663             {
<a name="l00664"></a>00664                 Fint += <a class="code" href="classofeli_1_1_active_contour.html#a0f8558877cf436d932838173ba5b8061" title="Pointer on the gaussian kernel buffer used to calculate Fint.">gaussian_kernel</a>[ (<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>+dx)+(<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>+dy)*<a class="code" href="classofeli_1_1_active_contour.html#a2b32161d0a9ac64a4e4f4c242fabe27c" title="Kernel length of the gaussian filter for the curve smoothing.">kernel_length</a> ]*<a class="code" href="classofeli_1_1_active_contour.html#aad511a8aa9771eb6f04cb2ac0b50c024" title="Gives the sign of a char. Return the integer -1 or 1.">signum_function</a>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[(x+dx)+(y+dy)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>] );
<a name="l00665"></a>00665             }
<a name="l00666"></a>00666         }
<a name="l00667"></a>00667     }
<a name="l00668"></a>00668     <span class="comment">// if in the border of the image, tests of neighbors</span>
<a name="l00669"></a>00669     <span class="keywordflow">else</span>
<a name="l00670"></a>00670     {
<a name="l00671"></a>00671         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> dy = -<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>; dy &lt;= <a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>; dy++ )
<a name="l00672"></a>00672         {
<a name="l00673"></a>00673             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> dx = -<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>; dx &lt;= <a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>; dx++ )
<a name="l00674"></a>00674             {
<a name="l00675"></a>00675                 <span class="keywordflow">if</span>( x+dx &gt;= 0 &amp;&amp; x+dx &lt; img_width &amp;&amp; y+dy &gt;= 0 &amp;&amp; y+dy &lt; <a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a> )
<a name="l00676"></a>00676                 {
<a name="l00677"></a>00677                     Fint += <a class="code" href="classofeli_1_1_active_contour.html#a0f8558877cf436d932838173ba5b8061" title="Pointer on the gaussian kernel buffer used to calculate Fint.">gaussian_kernel</a>[ (<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>+dx)+(<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>+dy)*<a class="code" href="classofeli_1_1_active_contour.html#a2b32161d0a9ac64a4e4f4c242fabe27c" title="Kernel length of the gaussian filter for the curve smoothing.">kernel_length</a> ]*<a class="code" href="classofeli_1_1_active_contour.html#aad511a8aa9771eb6f04cb2ac0b50c024" title="Gives the sign of a char. Return the integer -1 or 1.">signum_function</a>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[(x+dx)+(y+dy)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>] );
<a name="l00678"></a>00678                 }
<a name="l00679"></a>00679                 <span class="keywordflow">else</span>
<a name="l00680"></a>00680                 {
<a name="l00681"></a>00681                     Fint += <a class="code" href="classofeli_1_1_active_contour.html#a0f8558877cf436d932838173ba5b8061" title="Pointer on the gaussian kernel buffer used to calculate Fint.">gaussian_kernel</a>[ (<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>+dx)+(<a class="code" href="classofeli_1_1_active_contour.html#a00740d5331e8d4f60c1345cc8cabf7ad" title="kernel_radius = ( kernel_length - 1) / 2 with kernel_length impair.">kernel_radius</a>+dy)*<a class="code" href="classofeli_1_1_active_contour.html#a2b32161d0a9ac64a4e4f4c242fabe27c" title="Kernel length of the gaussian filter for the curve smoothing.">kernel_length</a> ]*<a class="code" href="classofeli_1_1_active_contour.html#aad511a8aa9771eb6f04cb2ac0b50c024" title="Gives the sign of a char. Return the integer -1 or 1.">signum_function</a>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] );
<a name="l00682"></a>00682                 }
<a name="l00683"></a>00683             }
<a name="l00684"></a>00684         }
<a name="l00685"></a>00685     }
<a name="l00686"></a>00686 
<a name="l00687"></a>00687     <span class="keywordflow">return</span> Fint;
<a name="l00688"></a>00688 }
<a name="l00689"></a>00689 
<a name="l00690"></a><a class="code" href="classofeli_1_1_active_contour.html#aad511a8aa9771eb6f04cb2ac0b50c024">00690</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classofeli_1_1_active_contour.html#aad511a8aa9771eb6f04cb2ac0b50c024" title="Gives the sign of a char. Return the integer -1 or 1.">ActiveContour::signum_function</a>(<span class="keywordtype">char</span> i)
<a name="l00691"></a>00691 {
<a name="l00692"></a>00692     <span class="keywordflow">if</span>( i &lt; 0 )
<a name="l00693"></a>00693     {
<a name="l00694"></a>00694         <span class="keywordflow">return</span> -1;
<a name="l00695"></a>00695     }
<a name="l00696"></a>00696     <span class="keywordflow">else</span>
<a name="l00697"></a>00697     {
<a name="l00698"></a>00698         <span class="keywordflow">return</span> 1;
<a name="l00699"></a>00699     }
<a name="l00700"></a>00700 }
<a name="l00701"></a>00701 
<a name="l00702"></a><a class="code" href="classofeli_1_1_active_contour.html#aa48c1dcf4663b546403254294b481c12">00702</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classofeli_1_1_active_contour.html#aa48c1dcf4663b546403254294b481c12" title="Finds if a current point (x,y) of Lin is redundant.">ActiveContour::find_isRedundantPointOfLin</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)<span class="keyword"> const</span>
<a name="l00703"></a>00703 <span class="keyword"></span>{
<a name="l00704"></a>00704     <span class="comment">//==============   4-connex version   =============</span>
<a name="l00705"></a>00705 
<a name="l00706"></a>00706     <span class="comment">// if ∃ a neighbor ∈ Lout | ∈ Rout</span>
<a name="l00707"></a>00707     <span class="keywordflow">if</span>( y-1 &gt;= 0 )
<a name="l00708"></a>00708     {
<a name="l00709"></a>00709         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[ x+(y-1)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> ] &gt;= 0 )
<a name="l00710"></a>00710         {
<a name="l00711"></a>00711             <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// is not redundant point of Lin</span>
<a name="l00712"></a>00712         }
<a name="l00713"></a>00713     }
<a name="l00714"></a>00714     <span class="keywordflow">if</span>( x-1 &gt;= 0 )
<a name="l00715"></a>00715     {
<a name="l00716"></a>00716         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[ (x-1)+y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> ] &gt;= 0 )
<a name="l00717"></a>00717         {
<a name="l00718"></a>00718             <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// is not redundant point of Lin</span>
<a name="l00719"></a>00719         }
<a name="l00720"></a>00720     }
<a name="l00721"></a>00721     <span class="keywordflow">if</span>( x+1 &lt; <a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> )
<a name="l00722"></a>00722     {
<a name="l00723"></a>00723         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[ (x+1)+y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> ] &gt;= 0 )
<a name="l00724"></a>00724         {
<a name="l00725"></a>00725             <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// is not redundant point of Lin</span>
<a name="l00726"></a>00726         }
<a name="l00727"></a>00727     }
<a name="l00728"></a>00728     <span class="keywordflow">if</span>( y+1 &lt; <a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a> )
<a name="l00729"></a>00729     {
<a name="l00730"></a>00730         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[ x+(y+1)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> ] &gt;= 0 )
<a name="l00731"></a>00731         {
<a name="l00732"></a>00732             <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// is not redundant point of Lin</span>
<a name="l00733"></a>00733         }
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736     <span class="comment">//=================================================</span>
<a name="l00737"></a>00737 
<a name="l00738"></a>00738 
<a name="l00739"></a>00739     <span class="comment">//==============   8-connex version   =============</span>
<a name="l00740"></a>00740 
<a name="l00741"></a>00741     <span class="comment">// if not in the border of the image, no neighbor test</span>
<a name="l00742"></a>00742     <span class="comment">/*if( x &gt; 0 &amp;&amp; x &lt; img_width-1 &amp;&amp; y &gt; 0 &amp;&amp; y &lt; img_height-1 )</span>
<a name="l00743"></a>00743 <span class="comment">    {</span>
<a name="l00744"></a>00744 <span class="comment">        // scan through a 8-connex neighborhood</span>
<a name="l00745"></a>00745 <span class="comment">        for( int dy = -1; dy &lt;= 1; dy++ )</span>
<a name="l00746"></a>00746 <span class="comment">        {</span>
<a name="l00747"></a>00747 <span class="comment">            for( int dx = -1; dx &lt;= 1; dx++ )</span>
<a name="l00748"></a>00748 <span class="comment">            {</span>
<a name="l00749"></a>00749 <span class="comment">                if( !( dx == 0 &amp;&amp; dy == 0 ) )</span>
<a name="l00750"></a>00750 <span class="comment">                {</span>
<a name="l00751"></a>00751 <span class="comment">                    // if ∃ a neighbor ∈ Lout | ∈ Rout</span>
<a name="l00752"></a>00752 <span class="comment">                    if( phi[ (x+dx)+(y+dy)*img_width ] &gt;= 0 )</span>
<a name="l00753"></a>00753 <span class="comment">                    {</span>
<a name="l00754"></a>00754 <span class="comment">                        return false; // is not redundant point of Lin</span>
<a name="l00755"></a>00755 <span class="comment">                    }</span>
<a name="l00756"></a>00756 <span class="comment">                }</span>
<a name="l00757"></a>00757 <span class="comment">            }</span>
<a name="l00758"></a>00758 <span class="comment">        }</span>
<a name="l00759"></a>00759 <span class="comment">    }</span>
<a name="l00760"></a>00760 <span class="comment"></span>
<a name="l00761"></a>00761 <span class="comment">    // if in the border of the image, tests of neighbors</span>
<a name="l00762"></a>00762 <span class="comment">    else</span>
<a name="l00763"></a>00763 <span class="comment">    {</span>
<a name="l00764"></a>00764 <span class="comment">        // scan through a 8-connex neighborhood</span>
<a name="l00765"></a>00765 <span class="comment">        for( int dy = -1; dy &lt;= 1; dy++ )</span>
<a name="l00766"></a>00766 <span class="comment">        {</span>
<a name="l00767"></a>00767 <span class="comment">            for( int dx = -1; dx &lt;= 1; dx++ )</span>
<a name="l00768"></a>00768 <span class="comment">            {</span>
<a name="l00769"></a>00769 <span class="comment">                if( !( dx == 0 &amp;&amp; dy == 0 ) )</span>
<a name="l00770"></a>00770 <span class="comment">                {</span>
<a name="l00771"></a>00771 <span class="comment">                    // neighbors tests</span>
<a name="l00772"></a>00772 <span class="comment">                    if( x+dx &gt;= 0 &amp;&amp; x+dx &lt; img_width &amp;&amp; y+dy &gt;= 0 &amp;&amp; y+dy &lt; img_height )</span>
<a name="l00773"></a>00773 <span class="comment">                    {</span>
<a name="l00774"></a>00774 <span class="comment">                        // if ∃ a neighbor ∈ Lout | ∈ Rout</span>
<a name="l00775"></a>00775 <span class="comment">                        if( phi[ (x+dx)+(y+dy)*img_width ] &gt;= 0 )</span>
<a name="l00776"></a>00776 <span class="comment">                        {</span>
<a name="l00777"></a>00777 <span class="comment">                            return false; // is not redundant point of Lin</span>
<a name="l00778"></a>00778 <span class="comment">                        }</span>
<a name="l00779"></a>00779 <span class="comment">                    }</span>
<a name="l00780"></a>00780 <span class="comment">                }</span>
<a name="l00781"></a>00781 <span class="comment">            }</span>
<a name="l00782"></a>00782 <span class="comment">        }</span>
<a name="l00783"></a>00783 <span class="comment">    }*/</span>
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     <span class="comment">//=================================================</span>
<a name="l00786"></a>00786 
<a name="l00787"></a>00787     <span class="comment">// ==&gt; ∀ neighbors ∈ Lin | ∈ Rin</span>
<a name="l00788"></a>00788     <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// is redundant point of Lin</span>
<a name="l00789"></a>00789 }
<a name="l00790"></a>00790 
<a name="l00791"></a><a class="code" href="classofeli_1_1_active_contour.html#a4ae66c32025302590ea82814909f8020">00791</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classofeli_1_1_active_contour.html#a4ae66c32025302590ea82814909f8020" title="Finds if a current point (x,y) of Lout is redundant.">ActiveContour::find_isRedundantPointOfLout</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)<span class="keyword"> const</span>
<a name="l00792"></a>00792 <span class="keyword"></span>{
<a name="l00793"></a>00793     <span class="comment">//==============   4-connex version   =============</span>
<a name="l00794"></a>00794 
<a name="l00795"></a>00795     <span class="comment">// if ∃ a neighbor ∈ Lin | ∈ Rin</span>
<a name="l00796"></a>00796     <span class="keywordflow">if</span>( y-1 &gt;= 0 )
<a name="l00797"></a>00797     {
<a name="l00798"></a>00798         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[ x+(y-1)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> ] &lt;= 0 )
<a name="l00799"></a>00799         {
<a name="l00800"></a>00800             <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// is not redundant point of Lout</span>
<a name="l00801"></a>00801         }
<a name="l00802"></a>00802     }
<a name="l00803"></a>00803     <span class="keywordflow">if</span>( x-1 &gt;= 0 )
<a name="l00804"></a>00804     {
<a name="l00805"></a>00805         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[ (x-1)+y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> ] &lt;= 0 )
<a name="l00806"></a>00806         {
<a name="l00807"></a>00807             <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// is not redundant point of Lout</span>
<a name="l00808"></a>00808         }
<a name="l00809"></a>00809     }
<a name="l00810"></a>00810     <span class="keywordflow">if</span>( x+1 &lt; <a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> )
<a name="l00811"></a>00811     {
<a name="l00812"></a>00812         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[ (x+1)+y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> ] &lt;= 0 )
<a name="l00813"></a>00813         {
<a name="l00814"></a>00814             <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// is not redundant point of Lout</span>
<a name="l00815"></a>00815         }
<a name="l00816"></a>00816     }
<a name="l00817"></a>00817     <span class="keywordflow">if</span>( y+1 &lt; <a class="code" href="classofeli_1_1_active_contour.html#a88d02b47bab737ec97fe3a7ea9554c0c" title="Image height, i.e. number of rows.">img_height</a> )
<a name="l00818"></a>00818     {
<a name="l00819"></a>00819         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[ x+(y+1)*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a> ] &lt;= 0 )
<a name="l00820"></a>00820         {
<a name="l00821"></a>00821             <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// is not redundant point of Lout</span>
<a name="l00822"></a>00822         }
<a name="l00823"></a>00823     }
<a name="l00824"></a>00824 
<a name="l00825"></a>00825     <span class="comment">//=================================================</span>
<a name="l00826"></a>00826 
<a name="l00827"></a>00827 
<a name="l00828"></a>00828     <span class="comment">//==============   8-connex version   =============</span>
<a name="l00829"></a>00829 
<a name="l00830"></a>00830     <span class="comment">// if not in the border of the image, no neighbor test</span>
<a name="l00831"></a>00831     <span class="comment">/*if( x &gt; 0 &amp;&amp; x &lt; img_width-1 &amp;&amp; y &gt; 0 &amp;&amp; y &lt; img_height-1 )</span>
<a name="l00832"></a>00832 <span class="comment">    {</span>
<a name="l00833"></a>00833 <span class="comment">        // scan through a 8-connex neighborhood</span>
<a name="l00834"></a>00834 <span class="comment">        for( int dy = -1; dy &lt;= 1; dy++ )</span>
<a name="l00835"></a>00835 <span class="comment">        {</span>
<a name="l00836"></a>00836 <span class="comment">            for( int dx = -1; dx &lt;= 1; dx++ )</span>
<a name="l00837"></a>00837 <span class="comment">            {</span>
<a name="l00838"></a>00838 <span class="comment">                if( !( dx == 0 &amp;&amp; dy == 0 ) )</span>
<a name="l00839"></a>00839 <span class="comment">                {</span>
<a name="l00840"></a>00840 <span class="comment">                    // if ∃ a neighbor ∈ Lin | ∈ Rin</span>
<a name="l00841"></a>00841 <span class="comment">                    if( phi[ (x+dx)+(y+dy)*img_width ] &lt;= 0 )</span>
<a name="l00842"></a>00842 <span class="comment">                    {</span>
<a name="l00843"></a>00843 <span class="comment">                        return false; // is not redundant point of Lout</span>
<a name="l00844"></a>00844 <span class="comment">                    }</span>
<a name="l00845"></a>00845 <span class="comment">                }</span>
<a name="l00846"></a>00846 <span class="comment">            }</span>
<a name="l00847"></a>00847 <span class="comment">        }</span>
<a name="l00848"></a>00848 <span class="comment">    }</span>
<a name="l00849"></a>00849 <span class="comment"></span>
<a name="l00850"></a>00850 <span class="comment">    // if in the border of the image, tests of neighbors</span>
<a name="l00851"></a>00851 <span class="comment">    else</span>
<a name="l00852"></a>00852 <span class="comment">    {</span>
<a name="l00853"></a>00853 <span class="comment">        // scan through a 8-connex neighborhood</span>
<a name="l00854"></a>00854 <span class="comment">        for( int dy = -1; dy &lt;= 1; dy++ )</span>
<a name="l00855"></a>00855 <span class="comment">        {</span>
<a name="l00856"></a>00856 <span class="comment">            for( int dx = -1; dx &lt;= 1; dx++ )</span>
<a name="l00857"></a>00857 <span class="comment">            {</span>
<a name="l00858"></a>00858 <span class="comment">                if( !( dx == 0 &amp;&amp; dy == 0 ) )</span>
<a name="l00859"></a>00859 <span class="comment">                {</span>
<a name="l00860"></a>00860 <span class="comment">                    // neighbors tests</span>
<a name="l00861"></a>00861 <span class="comment">                    if( x+dx &gt;= 0 &amp;&amp; x+dx &lt; img_width &amp;&amp; y+dy &gt;= 0 &amp;&amp; y+dy &lt; img_height )</span>
<a name="l00862"></a>00862 <span class="comment">                    {</span>
<a name="l00863"></a>00863 <span class="comment">                        // if ∃ a neighbor ∈ Lin | ∈ Rin</span>
<a name="l00864"></a>00864 <span class="comment">                        if( phi[ (x+dx)+(y+dy)*img_width ] &lt;= 0 )</span>
<a name="l00865"></a>00865 <span class="comment">                        {</span>
<a name="l00866"></a>00866 <span class="comment">                            return false; // is not redundant point of Lout</span>
<a name="l00867"></a>00867 <span class="comment">                        }</span>
<a name="l00868"></a>00868 <span class="comment">                    }</span>
<a name="l00869"></a>00869 <span class="comment">                }</span>
<a name="l00870"></a>00870 <span class="comment">            }</span>
<a name="l00871"></a>00871 <span class="comment">        }</span>
<a name="l00872"></a>00872 <span class="comment">    }*/</span>
<a name="l00873"></a>00873 
<a name="l00874"></a>00874     <span class="comment">//=================================================</span>
<a name="l00875"></a>00875 
<a name="l00876"></a>00876     <span class="comment">// ==&gt; ∀ neighbors ∈ Lout | ∈ Rout</span>
<a name="l00877"></a>00877     <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// is redundant point of Lout</span>
<a name="l00878"></a>00878 }
<a name="l00879"></a>00879 
<a name="l00880"></a><a class="code" href="classofeli_1_1_active_contour.html#a2fbcb81cc03239dae86e7a235dd64e00">00880</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a2fbcb81cc03239dae86e7a235dd64e00" title="Eliminates redundant points in Lin.">ActiveContour::eliminate_redundant_in_Lin</a>()
<a name="l00881"></a>00881 {
<a name="l00882"></a>00882     <span class="keywordtype">int</span> i, x, y; <span class="comment">// offset and position of the current point of the active contour</span>
<a name="l00883"></a>00883 
<a name="l00884"></a>00884     <span class="comment">// scan through Lin</span>
<a name="l00885"></a>00885     <span class="keywordflow">for</span>( <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a9644211d17b247bb008f2b129fddb434" title="Sets the current link to the head link.">begin</a>(); !<a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#ac87c58b2d4c2cc4c16cd0981bc0e17c5" title="Checks if he current link points to the last node.">end</a>();  )
<a name="l00886"></a>00886     {
<a name="l00887"></a>00887         i = <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#a55df006801917d08e146ab6302f203cb" title="Gets the element at the current position.">get_current</a>();
<a name="l00888"></a>00888 
<a name="l00889"></a>00889         <span class="comment">// i = x+y*img_width so</span>
<a name="l00890"></a>00890         y = i/<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00891"></a>00891         x = i-y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00892"></a>00892 
<a name="l00893"></a>00893         <span class="comment">// if ∀ neighbors ∈ Lin | ∈ Rin</span>
<a name="l00894"></a>00894         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#aa48c1dcf4663b546403254294b481c12" title="Finds if a current point (x,y) of Lin is redundant.">find_isRedundantPointOfLin</a>(x,y) )
<a name="l00895"></a>00895         {
<a name="l00896"></a>00896             <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] = -3; <span class="comment">// phi(point) = -1 --&gt; -3</span>
<a name="l00897"></a>00897             <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#ace33d40d48d16b985767646123232ec2" title="Removes from the list container the element at the current position.">erase</a>(); <span class="comment">// point ∈ Lin --&gt; ∈ Rin</span>
<a name="l00898"></a>00898         }
<a name="l00899"></a>00899         <span class="keywordflow">else</span>
<a name="l00900"></a>00900         {
<a name="l00901"></a>00901             <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>.<a class="code" href="classofeli_1_1_list.html#aa9e7033c3adc49c441decebf72b7b9b8" title="Sets the current link to the next link.">next</a>();
<a name="l00902"></a>00902         }
<a name="l00903"></a>00903     }
<a name="l00904"></a>00904 
<a name="l00905"></a>00905     <span class="keywordflow">return</span>;
<a name="l00906"></a>00906 }
<a name="l00907"></a>00907 
<a name="l00908"></a><a class="code" href="classofeli_1_1_active_contour.html#a33de623e3a4aefe9f31b6ec28428f807">00908</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a33de623e3a4aefe9f31b6ec28428f807" title="Eliminates redundant points in Lout.">ActiveContour::eliminate_redundant_in_Lout</a>()
<a name="l00909"></a>00909 {
<a name="l00910"></a>00910     <span class="keywordtype">int</span> i, x, y; <span class="comment">// offset and position of the current point of the active contour</span>
<a name="l00911"></a>00911 
<a name="l00912"></a>00912     <span class="comment">// scan through Lout</span>
<a name="l00913"></a>00913     <span class="keywordflow">for</span>( <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a9644211d17b247bb008f2b129fddb434" title="Sets the current link to the head link.">begin</a>(); !<a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#ac87c58b2d4c2cc4c16cd0981bc0e17c5" title="Checks if he current link points to the last node.">end</a>();  )
<a name="l00914"></a>00914     {
<a name="l00915"></a>00915         i = <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#a55df006801917d08e146ab6302f203cb" title="Gets the element at the current position.">get_current</a>();
<a name="l00916"></a>00916 
<a name="l00917"></a>00917         <span class="comment">// i = x+y*img_width so</span>
<a name="l00918"></a>00918         y = i/<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00919"></a>00919         x = i-y*<a class="code" href="classofeli_1_1_active_contour.html#a3623de7ebc0d27ba7fac21a5929afbc6" title="Image width, i.e. number of columns.">img_width</a>;
<a name="l00920"></a>00920 
<a name="l00921"></a>00921         <span class="comment">// if ∀ neighbors ∈ Lout | ∈ Rout</span>
<a name="l00922"></a>00922         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a4ae66c32025302590ea82814909f8020" title="Finds if a current point (x,y) of Lout is redundant.">find_isRedundantPointOfLout</a>(x,y) )
<a name="l00923"></a>00923         {
<a name="l00924"></a>00924             <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>[i] = 3; <span class="comment">// phi(point) = 1 --&gt; 3</span>
<a name="l00925"></a>00925             <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#ace33d40d48d16b985767646123232ec2" title="Removes from the list container the element at the current position.">erase</a>(); <span class="comment">// point ∈ Lout --&gt; ∈ Rout</span>
<a name="l00926"></a>00926         }
<a name="l00927"></a>00927         <span class="keywordflow">else</span>
<a name="l00928"></a>00928         {
<a name="l00929"></a>00929             <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>.<a class="code" href="classofeli_1_1_list.html#aa9e7033c3adc49c441decebf72b7b9b8" title="Sets the current link to the next link.">next</a>();
<a name="l00930"></a>00930         }
<a name="l00931"></a>00931     }
<a name="l00932"></a>00932 
<a name="l00933"></a>00933     <span class="keywordflow">return</span>;
<a name="l00934"></a>00934 }
<a name="l00935"></a>00935 
<a name="l00936"></a>00936 
<a name="l00937"></a><a class="code" href="classofeli_1_1_active_contour.html#ab53eb16e33ba58b3bb9402a186d71d31">00937</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classofeli_1_1_active_contour.html#ab53eb16e33ba58b3bb9402a186d71d31" title="Computes the external speed Fd for a current point (x,y) of Lout or Lin.">ActiveContour::compute_external_speed_Fd</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l00938"></a>00938 {
<a name="l00939"></a>00939     <span class="comment">// this class should never be instantiated</span>
<a name="l00940"></a>00940 
<a name="l00941"></a>00941     <span class="keywordflow">return</span> -1; <span class="comment">// always an inward movement of the active contour, not a very discriminant speed...</span>
<a name="l00942"></a>00942 
<a name="l00943"></a>00943     <span class="comment">// reimplement a better and data-dependant function in a child class</span>
<a name="l00944"></a>00944 }
<a name="l00945"></a>00945 
<a name="l00946"></a>00946 <span class="comment">// at the end of each iteration in the cycle 1</span>
<a name="l00947"></a><a class="code" href="classofeli_1_1_active_contour.html#a7c7275006d98705cd7f04f8a7fe7e697">00947</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a7c7275006d98705cd7f04f8a7fe7e697" title="First stopping condition called at the end of each iteration of the cycle 1. Update of hasListsChange...">ActiveContour::calculate_stopping_conditions1</a>()
<a name="l00948"></a>00948 {
<a name="l00949"></a>00949     <span class="keywordflow">if</span>( !<a class="code" href="classofeli_1_1_active_contour.html#af437460aa2cdf312166a3fe4d54beeb4" title="Boolean egals to true if one point of Lin at least is switched out during the scan through the Lin li...">hasInwardEvolution</a> &amp;&amp; !<a class="code" href="classofeli_1_1_active_contour.html#a9dcea2f4d6803007fe98e38152adf000" title="Boolean egals to true if one point of Lout at least is switched in during the scan through the Lout l...">hasOutwardEvolution</a> )
<a name="l00950"></a>00950     {
<a name="l00951"></a>00951         <a class="code" href="classofeli_1_1_active_contour.html#acaaac3e08e34cf03c1320c220b188b78" title="Boolean egals to true if hasOutwardEvolution egals to true or hasInwardEvolution egals to true...">hasListsChanges</a> = <span class="keyword">false</span>;
<a name="l00952"></a>00952     }
<a name="l00953"></a>00953 
<a name="l00954"></a>00954     <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a>++;
<a name="l00955"></a>00955 
<a name="l00956"></a>00956     <span class="keywordflow">if</span>( !<a class="code" href="classofeli_1_1_active_contour.html#acaaac3e08e34cf03c1320c220b188b78" title="Boolean egals to true if hasOutwardEvolution egals to true or hasInwardEvolution egals to true...">hasListsChanges</a> || <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a> &gt;= <a class="code" href="classofeli_1_1_active_contour.html#af703d4f53719f3a8bebb14f70c43c037" title="Maximum number of times the active contour can evolve.">max_iterations</a> )
<a name="l00957"></a>00957     {
<a name="l00958"></a>00958         <a class="code" href="classofeli_1_1_active_contour.html#a2ff3ef2151ddf1e7f9f260ad9bf3d6f2" title="Boolean egals to false to go away the cycle 1 and never to go back into.">hasCycle1</a> = <span class="keyword">false</span>;
<a name="l00959"></a>00959 
<a name="l00960"></a>00960         <span class="keywordflow">if</span>( !<a class="code" href="classofeli_1_1_active_contour.html#a2d78fdef72930323ab6bdd38b167afa1" title="Boolean egals to true to have the curve smoothing, evolutions in the cycle 2 with the internal speed ...">hasSmoothingCycle</a> )
<a name="l00961"></a>00961         {
<a name="l00962"></a>00962             <a class="code" href="classofeli_1_1_active_contour.html#ac239b94976782c0769bda5d2b1e3d1b8" title="Boolean egals to true to stop the algorithm.">hasAlgoStopping</a> = <span class="keyword">true</span>;
<a name="l00963"></a>00963         }
<a name="l00964"></a>00964     }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966     <span class="keywordflow">return</span>;
<a name="l00967"></a>00967 }
<a name="l00968"></a>00968 
<a name="l00969"></a>00969 <span class="comment">// at the end of the last iteration of the cycle 2</span>
<a name="l00970"></a><a class="code" href="classofeli_1_1_active_contour.html#a218109b08dd520c95ee7613235bb0593">00970</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a218109b08dd520c95ee7613235bb0593" title="Second stopping condition called at the end of the cycle 2. Update of hasOscillation. Two tests on hasOscillation and iterations are done. If one test is positive, hasAlgoStopping egals to true and the active contour stops.">ActiveContour::calculate_stopping_conditions2</a>()
<a name="l00971"></a>00971 {
<a name="l00972"></a>00972     <span class="comment">// if the relative difference of active contour length between two cycle2 is less of 0.01</span>
<a name="l00973"></a>00973     <span class="keywordflow">if</span>( <span class="keywordtype">double</span>(abs(<a class="code" href="classofeli_1_1_active_contour.html#a653c2bcd37ed61e9eacda89a013590d4" title="Length of Lin + length of Lout of the previous iteration.">previous_lists_length</a>-<a class="code" href="classofeli_1_1_active_contour.html#aefe0738d8a43f3981d591a0cc78ed717" title="Length of Lin + length of Lout.">lists_length</a>))/<span class="keywordtype">double</span>(std::max(<a class="code" href="classofeli_1_1_active_contour.html#aefe0738d8a43f3981d591a0cc78ed717" title="Length of Lin + length of Lout.">lists_length</a>,<a class="code" href="classofeli_1_1_active_contour.html#a653c2bcd37ed61e9eacda89a013590d4" title="Length of Lin + length of Lout of the previous iteration.">previous_lists_length</a>)) &lt; 0.01 )
<a name="l00974"></a>00974     {
<a name="l00975"></a>00975         <a class="code" href="classofeli_1_1_active_contour.html#a2ed4a3e2aa6904c287412a1510318b96" title="To count the number of times the relative gap of the lists length are less of a constant, fixed at 0.5%.">counter</a>++;
<a name="l00976"></a>00976     }
<a name="l00977"></a>00977     <span class="comment">// not consecutivly ==&gt; reinitialization</span>
<a name="l00978"></a>00978     <span class="keywordflow">else</span>
<a name="l00979"></a>00979     {
<a name="l00980"></a>00980         <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a2ed4a3e2aa6904c287412a1510318b96" title="To count the number of times the relative gap of the lists length are less of a constant, fixed at 0.5%.">counter</a> != 0 )
<a name="l00981"></a>00981         {
<a name="l00982"></a>00982             <a class="code" href="classofeli_1_1_active_contour.html#a2ed4a3e2aa6904c287412a1510318b96" title="To count the number of times the relative gap of the lists length are less of a constant, fixed at 0.5%.">counter</a> = 0;
<a name="l00983"></a>00983         }
<a name="l00984"></a>00984     }
<a name="l00985"></a>00985 
<a name="l00986"></a>00986     <span class="comment">// if 3 times consecutivly</span>
<a name="l00987"></a>00987     <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a2ed4a3e2aa6904c287412a1510318b96" title="To count the number of times the relative gap of the lists length are less of a constant, fixed at 0.5%.">counter</a> == 3 )
<a name="l00988"></a>00988     {
<a name="l00989"></a>00989         <a class="code" href="classofeli_1_1_active_contour.html#a23e817e4d98cdc2ba8da0b44c5d0ffb8" title="Boolean egals to true if oscillations are detected. In this case, hasAlgoStopping egals to true...">hasOscillation</a> = <span class="keyword">true</span>;
<a name="l00990"></a>00990     }
<a name="l00991"></a>00991 
<a name="l00992"></a>00992     <span class="keywordflow">if</span>( <a class="code" href="classofeli_1_1_active_contour.html#a23e817e4d98cdc2ba8da0b44c5d0ffb8" title="Boolean egals to true if oscillations are detected. In this case, hasAlgoStopping egals to true...">hasOscillation</a> || <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a> &gt;= <a class="code" href="classofeli_1_1_active_contour.html#af703d4f53719f3a8bebb14f70c43c037" title="Maximum number of times the active contour can evolve.">max_iterations</a> || !<a class="code" href="classofeli_1_1_active_contour.html#a2ff3ef2151ddf1e7f9f260ad9bf3d6f2" title="Boolean egals to false to go away the cycle 1 and never to go back into.">hasCycle1</a> )
<a name="l00993"></a>00993     {
<a name="l00994"></a>00994         <a class="code" href="classofeli_1_1_active_contour.html#ac239b94976782c0769bda5d2b1e3d1b8" title="Boolean egals to true to stop the algorithm.">hasAlgoStopping</a> = <span class="keyword">true</span>;
<a name="l00995"></a>00995     }
<a name="l00996"></a>00996 
<a name="l00997"></a>00997     <span class="comment">// keep last length to compare after</span>
<a name="l00998"></a>00998     <a class="code" href="classofeli_1_1_active_contour.html#a653c2bcd37ed61e9eacda89a013590d4" title="Length of Lin + length of Lout of the previous iteration.">previous_lists_length</a> = <a class="code" href="classofeli_1_1_active_contour.html#aefe0738d8a43f3981d591a0cc78ed717" title="Length of Lin + length of Lout.">lists_length</a>;
<a name="l00999"></a>00999 
<a name="l01000"></a>01000     <span class="comment">// reinitialization</span>
<a name="l01001"></a>01001     <a class="code" href="classofeli_1_1_active_contour.html#aefe0738d8a43f3981d591a0cc78ed717" title="Length of Lin + length of Lout.">lists_length</a> = 0;
<a name="l01002"></a>01002 
<a name="l01003"></a>01003     <span class="keywordflow">return</span>;
<a name="l01004"></a>01004 }
<a name="l01005"></a>01005 
<a name="l01006"></a><a class="code" href="classofeli_1_1_active_contour.html#a05886cd0f9187aa1b7e709f3018294cf">01006</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classofeli_1_1_active_contour.html#a05886cd0f9187aa1b7e709f3018294cf" title="Calculates max_iterations.">ActiveContour::calculate_max_iterations</a>(<span class="keywordtype">int</span> width1, <span class="keywordtype">int</span> height1)
<a name="l01007"></a>01007 {
<a name="l01008"></a>01008     <span class="keywordflow">if</span>( width1 &gt; height1 )
<a name="l01009"></a>01009     {
<a name="l01010"></a>01010         <span class="keywordflow">return</span> 5*height1;
<a name="l01011"></a>01011     }
<a name="l01012"></a>01012     <span class="keywordflow">else</span>
<a name="l01013"></a>01013     {
<a name="l01014"></a>01014         <span class="keywordflow">return</span> 5*width1;
<a name="l01015"></a>01015     }
<a name="l01016"></a>01016 }
<a name="l01017"></a>01017 
<a name="l01018"></a>01018 <span class="comment">// template functions square is defined in the header file</span>
<a name="l01019"></a>01019 
<a name="l01020"></a>01020 <span class="comment">// 3 getters to see the result</span>
<a name="l01021"></a><a class="code" href="classofeli_1_1_active_contour.html#a2ca29aefe34c31b6c2072742728a0eb6">01021</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="classofeli_1_1_active_contour.html#a2ca29aefe34c31b6c2072742728a0eb6" title="Getter function for the pointer phi.">ActiveContour::get_phi</a>()<span class="keyword"> const</span>
<a name="l01022"></a>01022 <span class="keyword"></span>{
<a name="l01023"></a>01023     <span class="keywordflow">return</span> <a class="code" href="classofeli_1_1_active_contour.html#aacb03a6ded4ca51cb52f58aeff955ef7" title="Pointer on the level-set function buffer.">phi</a>;
<a name="l01024"></a>01024 }
<a name="l01025"></a>01025 
<a name="l01026"></a><a class="code" href="classofeli_1_1_active_contour.html#a56b59598b687a05a8e575f9112201d64">01026</a> <span class="keyword">const</span> <a class="code" href="classofeli_1_1_list.html" title="This class implements a singly linked list used by the implementation of Shi and Karl&#39; algorithm...">ofeli::List</a>&amp; <a class="code" href="classofeli_1_1_active_contour.html#a56b59598b687a05a8e575f9112201d64" title="Getter function for the linked list Lout.">ActiveContour::get_Lout</a>()<span class="keyword"> const</span>
<a name="l01027"></a>01027 <span class="keyword"></span>{
<a name="l01028"></a>01028     <span class="keywordflow">return</span> <a class="code" href="classofeli_1_1_active_contour.html#a01d33d34f4cc81685432a59aaedd701a" title="List of points belong to the outside boundary.">Lout</a>;
<a name="l01029"></a>01029 }
<a name="l01030"></a>01030 
<a name="l01031"></a><a class="code" href="classofeli_1_1_active_contour.html#aad48b8bf1bd0d4be6db7eed8283a6298">01031</a> <span class="keyword">const</span> <a class="code" href="classofeli_1_1_list.html" title="This class implements a singly linked list used by the implementation of Shi and Karl&#39; algorithm...">ofeli::List</a>&amp; <a class="code" href="classofeli_1_1_active_contour.html#aad48b8bf1bd0d4be6db7eed8283a6298" title="Getter function for the linked list Lin.">ActiveContour::get_Lin</a>()<span class="keyword"> const</span>
<a name="l01032"></a>01032 <span class="keyword"></span>{
<a name="l01033"></a>01033     <span class="keywordflow">return</span> <a class="code" href="classofeli_1_1_active_contour.html#ab1dcfa60feab473e8845ccfaa51caaf6" title="List of points belong to the inside boundary.">Lin</a>;
<a name="l01034"></a>01034 }
<a name="l01035"></a>01035 
<a name="l01036"></a>01036 
<a name="l01037"></a>01037 
<a name="l01038"></a>01038 <span class="comment">// 5 getters to see the variables of the stopping conditions</span>
<a name="l01039"></a><a class="code" href="classofeli_1_1_active_contour.html#abdecbca7ff1f73b2b7ba52d19dfd56f3">01039</a> <span class="keywordtype">bool</span> <a class="code" href="classofeli_1_1_active_contour.html#abdecbca7ff1f73b2b7ba52d19dfd56f3" title="Getter function for the boolean hasListsChanges.">ActiveContour::get_hasListsChanges</a>()<span class="keyword"> const</span>
<a name="l01040"></a>01040 <span class="keyword"></span>{
<a name="l01041"></a>01041     <span class="keywordflow">return</span> <a class="code" href="classofeli_1_1_active_contour.html#acaaac3e08e34cf03c1320c220b188b78" title="Boolean egals to true if hasOutwardEvolution egals to true or hasInwardEvolution egals to true...">hasListsChanges</a>;
<a name="l01042"></a>01042 }
<a name="l01043"></a>01043 
<a name="l01044"></a><a class="code" href="classofeli_1_1_active_contour.html#a26b50306becb71e376fc9093f5732e7a">01044</a> <span class="keywordtype">bool</span> <a class="code" href="classofeli_1_1_active_contour.html#a26b50306becb71e376fc9093f5732e7a" title="Getter function for the boolean hasOscillation.">ActiveContour::get_hasOscillation</a>()<span class="keyword"> const</span>
<a name="l01045"></a>01045 <span class="keyword"></span>{
<a name="l01046"></a>01046     <span class="keywordflow">return</span> <a class="code" href="classofeli_1_1_active_contour.html#a23e817e4d98cdc2ba8da0b44c5d0ffb8" title="Boolean egals to true if oscillations are detected. In this case, hasAlgoStopping egals to true...">hasOscillation</a>;
<a name="l01047"></a>01047 }
<a name="l01048"></a>01048 
<a name="l01049"></a><a class="code" href="classofeli_1_1_active_contour.html#a934487d397d1d4609798b2ae6627100a">01049</a> <span class="keywordtype">int</span> <a class="code" href="classofeli_1_1_active_contour.html#a934487d397d1d4609798b2ae6627100a" title="Getter function for iterations.">ActiveContour::get_iterations</a>()<span class="keyword"> const</span>
<a name="l01050"></a>01050 <span class="keyword"></span>{
<a name="l01051"></a>01051     <span class="keywordflow">return</span> <a class="code" href="classofeli_1_1_active_contour.html#ac155630f750a4811ddbcb5c3b0aff2df" title="Number of times the active contour evolves.">iterations</a>;
<a name="l01052"></a>01052 }
<a name="l01053"></a>01053 
<a name="l01054"></a><a class="code" href="classofeli_1_1_active_contour.html#a08f7161a756743daeab8827b1fb3fe46">01054</a> <span class="keywordtype">int</span> <a class="code" href="classofeli_1_1_active_contour.html#a08f7161a756743daeab8827b1fb3fe46" title="Getter function for max_iterations.">ActiveContour::get_max_iterations</a>()<span class="keyword"> const</span>
<a name="l01055"></a>01055 <span class="keyword"></span>{
<a name="l01056"></a>01056     <span class="keywordflow">return</span> <a class="code" href="classofeli_1_1_active_contour.html#af703d4f53719f3a8bebb14f70c43c037" title="Maximum number of times the active contour can evolve.">max_iterations</a>;
<a name="l01057"></a>01057 }
<a name="l01058"></a>01058 
<a name="l01059"></a><a class="code" href="classofeli_1_1_active_contour.html#aabb77561db9271b00df81341f526e976">01059</a> <span class="keywordtype">bool</span> <a class="code" href="classofeli_1_1_active_contour.html#aabb77561db9271b00df81341f526e976" title="Getter function for the boolean hasAlgoStopping.">ActiveContour::get_hasAlgoStopping</a>()<span class="keyword"> const</span>
<a name="l01060"></a>01060 <span class="keyword"></span>{
<a name="l01061"></a>01061     <span class="keywordflow">return</span> <a class="code" href="classofeli_1_1_active_contour.html#ac239b94976782c0769bda5d2b1e3d1b8" title="Boolean egals to true to stop the algorithm.">hasAlgoStopping</a>;
<a name="l01062"></a>01062 }
<a name="l01063"></a>01063 
<a name="l01064"></a><a class="code" href="classofeli_1_1_active_contour.html#ad81d408bec3feae072028c7db664797d">01064</a> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#ad81d408bec3feae072028c7db664797d" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to c...">ActiveContour::do_specific_beginning_step</a>()
<a name="l01065"></a>01065 {
<a name="l01066"></a>01066     <span class="keywordflow">return</span>;
<a name="l01067"></a>01067 }
<a name="l01068"></a>01068 
<a name="l01069"></a><a class="code" href="classofeli_1_1_active_contour.html#ae34d798fec18971f9b0f6cbed59c090f">01069</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#ae34d798fec18971f9b0f6cbed59c090f" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to u...">ActiveContour::do_specific_in_step</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l01070"></a>01070 {
<a name="l01071"></a>01071     <span class="keywordflow">return</span>;
<a name="l01072"></a>01072 }
<a name="l01073"></a>01073 
<a name="l01074"></a><a class="code" href="classofeli_1_1_active_contour.html#ae938fd6dcb59480b9262c64094613984">01074</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#ae938fd6dcb59480b9262c64094613984" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to u...">ActiveContour::do_specific_out_step</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l01075"></a>01075 {
<a name="l01076"></a>01076     <span class="keywordflow">return</span>;
<a name="l01077"></a>01077 }
<a name="l01078"></a>01078 
<a name="l01079"></a><a class="code" href="classofeli_1_1_active_contour.html#a29ffb870edb974dc2ab0a1851e2483bf">01079</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a29ffb870edb974dc2ab0a1851e2483bf" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to u...">ActiveContour::do_specific_in_step2</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l01080"></a>01080 {
<a name="l01081"></a>01081     <span class="keywordflow">return</span>;
<a name="l01082"></a>01082 }
<a name="l01083"></a>01083 
<a name="l01084"></a>01084 
<a name="l01085"></a><a class="code" href="classofeli_1_1_active_contour.html#a265bec94de92dfa81d786099bcbc30ab">01085</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classofeli_1_1_active_contour.html#a265bec94de92dfa81d786099bcbc30ab" title="Specific step reimplemented in the children active contours ACwithoutEdges and ACwithoutEdgesYUV to u...">ActiveContour::do_specific_out_step2</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l01086"></a>01086 {
<a name="l01087"></a>01087     <span class="keywordflow">return</span>;
<a name="l01088"></a>01088 }
<a name="l01089"></a>01089 
<a name="l01090"></a>01090 }
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
